<!-- START OF FILE employee-schedule.txt (HTML/CSS ONLY) -->
<style>
    /* CSS Styles from employee-schedule.txt remain the same */
    :root {
        --primary: #2563eb;
        --primary-dark: #1e3a8a;
        --secondary: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --dark: #1e293b;
        --light: #f8fafc;
        --gray: #64748b;
        --light-gray: #e2e8f0;
        --white: #ffffff;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Ensure styles target elements within the loaded container */
    #featureSections .main-container {
        max-width: 1400px;
        margin: 2rem auto;
        padding: 0 2rem;
    }

    #featureSections .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        flex-wrap: wrap; /* Allow wrapping */
        gap: 1rem; /* Add gap for wrapped items */
    }

    #featureSections .page-title {
        font-size: 1.8rem;
        color: var(--primary-dark);
        font-weight: 700;
    }

    /* Schedule Controls */
    #featureSections .schedule-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        background-color: var(--white);
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        flex-wrap: wrap; /* Allow wrapping */
        gap: 1rem; /* Add gap for wrapped items */
    }

    #featureSections .week-navigation {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-grow: 1; /* Allow nav to take space */
        justify-content: center; /* Center week display */
    }

    #featureSections .week-display {
        font-weight: 600;
        min-width: 180px; /* Slightly reduced min-width */
        text-align: center;
    }

    #featureSections .btn {
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
        display: inline-flex; /* Changed to inline-flex */
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap; /* Prevent button text wrapping */
    }

    #featureSections .btn-primary {
        background-color: var(--primary);
        color: white;
    }

    #featureSections .btn-primary:hover:not(:disabled) {
        background-color: var(--primary-dark);
    }

    #featureSections .btn-outline {
        background-color: transparent;
        border: 1px solid var(--primary);
        color: var(--primary);
    }

    #featureSections .btn-outline:hover:not(:disabled) {
        background-color: var(--primary-light); /* Use theme color */
    }

    #featureSections .btn-danger {
        background-color: var(--danger);
        color: white;
    }

    #featureSections .btn-danger:hover:not(:disabled) {
        background-color: #dc2626;
    }

     #featureSections .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
     }

    /* Schedule Table */
    #featureSections .schedule-container {
        background-color: var(--white);
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        overflow-x: auto; /* Enable horizontal scroll */
        -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    }

    #featureSections .schedule-table {
        width: 100%;
        min-width: 800px; /* Ensure table has minimum width for scrolling */
        border-collapse: separate; /* Use separate for border-spacing */
        border-spacing: 0 8px; /* Add vertical space between rows */
    }

    #featureSections .schedule-table thead th {
        padding: 1rem 0.5rem;
        text-align: center;
        background-color: var(--primary);
        color: white;
        font-weight: 600;
        position: sticky;
        top: 0;
        z-index: 10; /* Ensure header stays above content */
         border-bottom: 2px solid var(--primary-dark); /* Stronger bottom border */
    }

    #featureSections .schedule-table tbody td {
        padding: 0.75rem 0.5rem; /* Increased padding slightly */
        text-align: center;
        background-color: var(--white); /* Use variable */
        border: none; /* Remove individual cell borders */
        border-bottom: 1px solid var(--light-gray); /* Add bottom border to cells */
        vertical-align: middle; /* Align content vertically */
    }
     #featureSections .schedule-table tbody tr:last-child td {
         border-bottom: none; /* Remove border from last row */
     }

    #featureSections .schedule-table tbody tr {
        /* Removed margin-bottom, using border-spacing */
        transition: background-color 0.2s ease;
    }
     #featureSections .schedule-table tbody tr:hover td {
         background-color: var(--light); /* Subtle hover effect */
     }


    #featureSections .employee-name {
        font-weight: 600;
        text-align: left;
        position: sticky;
        left: 0;
        background-color: var(--white); /* Use variable */
        padding: 0.75rem 1rem;
        white-space: nowrap;
        z-index: 5; /* Ensure employee name stays above other cells */
         border-right: 1px solid var(--light-gray); /* Add right border */
    }
      #featureSections .schedule-table tbody tr:hover .employee-name {
         background-color: var(--light); /* Match row hover */
     }


    /* Shift Styles */
    #featureSections .shift {
        padding: 0.3rem 0.6rem; /* Adjusted padding */
        border-radius: 4px;
        font-size: 0.8rem; /* Slightly larger font */
        font-weight: 500;
        white-space: nowrap;
        display: inline-block; /* Allow margin/padding */
        min-width: 70px; /* Ensure minimum width */
        text-align: center;
    }

    #featureSections .shift-morning { background-color: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; }
    #featureSections .shift-afternoon { background-color: #e0f2fe; color: #0c4a6e; border: 1px solid #bae6fd; }
    #featureSections .shift-night { background-color: #ede9fe; color: #5b21b6; border: 1px solid #ddd6fe; }
    #featureSections .day-off { background-color: #f0fdf4; color: #166534; border: 1px solid #bbf7d0; font-style: italic; }
    #featureSections .sick-leave { background-color: #fee2e2; color: #991b1b; border: 1px solid #fecaca; font-style: italic; }
    #featureSections .vacation { background-color: #ffedd5; color: #9a3412; border: 1px solid #fed7aa; font-style: italic; }

    /* Compact day headers */
    #featureSections .day-header {
        display: flex;
        flex-direction: column;
        gap: 0.1rem; /* Reduced gap */
        align-items: center;
    }

    #featureSections .day-name { font-weight: 600; font-size: 0.9rem; }
    #featureSections .day-date { font-size: 0.8rem; opacity: 0.8; } /* Slightly less opacity */

    /* Modal Styles */
    #featureSections .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6); /* Darker backdrop */
        z-index: 1050;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(3px); /* Add blur effect */
        padding: 1rem; /* Add padding for smaller screens */
    }

    #featureSections .modal-content {
        background-color: var(--white);
        width: 100%; /* Full width on small screens */
        max-width: 550px; /* Slightly smaller max-width */
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        padding: 2rem;
        max-height: 90vh;
        overflow-y: auto;
        animation: fadeInScaleModal 0.3s ease-out;
    }
     @keyframes fadeInScaleModal { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }


    #featureSections .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
         padding-bottom: 1rem; /* Add padding below header */
         border-bottom: 1px solid var(--light-gray); /* Add border below header */
    }

    #featureSections .modal-title {
        font-size: 1.4rem; /* Adjusted size */
        font-weight: 600;
        color: var(--primary-dark);
    }

    #featureSections .close-modal {
        background: none;
        border: none;
        font-size: 1.75rem; /* Larger close button */
        cursor: pointer;
        color: var(--gray);
        line-height: 1; /* Ensure proper alignment */
        padding: 0.25rem; /* Add padding for easier clicking */
        transition: color 0.2s ease;
    }
    #featureSections .close-modal:hover {
         color: var(--danger);
     }


    #featureSections .form-group { margin-bottom: 1.25rem; } /* Adjusted margin */
    #featureSections .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--dark); font-size: 0.9rem; } /* Slightly smaller label */
    #featureSections .form-control { width: 100%; padding: 0.75rem; border: 1px solid var(--light-gray); border-radius: 6px; font-size: 0.95rem; background-color: var(--white); color: var(--dark); transition: border-color 0.2s, box-shadow 0.2s; }
    #featureSections .form-control:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
    #featureSections .form-control[readonly] { background-color: var(--light-gray); cursor: not-allowed; opacity: 0.7; }


    #featureSections .form-actions { display: flex; justify-content: flex-end; gap: 0.75rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--light-gray); }

    /* Admin Controls / Edit Shift Link */
    #featureSections .admin-controls { position: relative; padding-top: 5px; padding-bottom: 5px; } /* Add padding to cell */
    #featureSections .edit-shift {
        cursor: pointer;
        color: var(--primary);
        font-size: 0.75rem; /* Smaller font */
        display: none; /* Controlled by JS */
        margin-left: 5px;
        opacity: 0.7;
        transition: opacity 0.2s ease;
        vertical-align: middle; /* Align with shift text */
    }
    #featureSections .admin-controls:hover .edit-shift {
         opacity: 1; /* Show fully on hover */
    }
    /* Make the entire cell clickable if edit is available */
     #featureSections .admin-controls .edit-shift {
         /* display: block; */ /* Make span block level */
         /* position: absolute; */ /* Position absolutely for full cell click (optional) */
         /* top: 0; left: 0; width: 100%; height: 100%; */
         /* text-align: center; padding-top: 25px; */ /* Adjust as needed */
         /* background: rgba(255,255,255,0.8); */ /* Optional background on hover */
     }


    /* Toast Notification */
    #featureSections .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--dark); /* Use dark background */
        color: white;
        padding: 0.8rem 1.2rem; /* Adjusted padding */
        border-radius: 6px; /* Slightly smaller radius */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 1100;
        display: none;
        max-width: 320px;
        font-size: 0.9rem;
        border-left: 4px solid var(--primary); /* Add accent border */
    }
    #featureSections .toast.toast-success { border-left-color: var(--success); background-color: var(--success); }
    #featureSections .toast.toast-danger { border-left-color: var(--danger); background-color: var(--danger); }


    #featureSections .toast.show { display: block; animation: fadeInToast 0.3s ease-out, fadeOutToast 0.3s 2.7s ease-in forwards; } /* Added forwards */

    @keyframes fadeInToast {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOutToast {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(20px); }
    }

    /* Responsive Design */
    @media (max-width: 992px) {
        #featureSections .schedule-controls { justify-content: center; } /* Center controls */
    }
    @media (max-width: 768px) {
        #featureSections .main-container { padding: 0 1rem; margin-top: 1rem;} /* Reduce padding/margin */
        #featureSections .page-header { margin-bottom: 1.5rem; }
        #featureSections .schedule-controls {
             flex-direction: column;
             gap: 1rem;
             align-items: stretch;
        }
        #featureSections .week-navigation {
             justify-content: space-between;
             width: 100%;
        }
        #featureSections .employee-name {
             position: static; /* Remove sticky on mobile */
             border-right: none;
             background-color: var(--light); /* Add distinct background */
             padding: 0.5rem;
             font-size: 0.9rem;
         }
         #featureSections .schedule-table thead th { position: static; }
         #featureSections .schedule-table { min-width: auto; } /* Allow table to shrink */
         #featureSections .schedule-table tbody td { padding: 0.5rem 0.25rem; font-size: 0.8rem; } /* Reduce padding */
         #featureSections .shift { font-size: 0.7rem; padding: 0.2rem 0.4rem; min-width: 50px; }
         #featureSections .edit-shift { font-size: 0.7rem; }
         #featureSections .modal-content { padding: 1.5rem; }
         #featureSections .modal-title { font-size: 1.2rem; }
    }
     @media (max-width: 480px) {
         #featureSections .page-title { font-size: 1.5rem; }
         #featureSections .btn { padding: 0.4rem 0.8rem; font-size: 0.85rem; }
         #featureSections .week-display { font-size: 0.9rem; min-width: 140px; }
         #featureSections .day-header { gap: 0; }
         #featureSections .day-name { font-size: 0.8rem; }
         #featureSections .day-date { font-size: 0.7rem; }
     }
</style>

<!-- Main Content Area for Employee Schedule -->
<div class="main-container" id="employeeScheduleContainer">
    <div class="page-header">
        <h1 class="page-title">Employee Schedule</h1>
        <div>
            <!-- Buttons are initially hidden, JS will show based on role -->
            <button class="btn btn-primary" id="addEmployeeBtn" style="display: none;">
                <i class="fas fa-plus"></i> Add Employee
            </button>
            <button class="btn btn-secondary" id="sendRemindersBtn" style="display: none; background-color: var(--secondary);">
                <i class="fas fa-envelope"></i> Send Reminders
            </button>
        </div>
    </div>

    <!-- Schedule Controls -->
    <div class="schedule-controls">
        <div class="week-navigation">
            <button class="btn btn-outline" id="prevWeekBtn" title="Previous Week">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="week-display" id="weekDisplay">Loading...</div>
            <button class="btn btn-outline" id="nextWeekBtn" title="Next Week">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <button class="btn btn-primary" id="saveScheduleBtn" style="display: none;">
            <i class="fas fa-save"></i> Save Schedule
        </button>
    </div>

    <!-- Schedule Table -->
    <div class="schedule-container">
        <table class="schedule-table">
            <thead>
                <tr>
                    <!-- Headers updated by JS -->
                    <th>Employee</th>
                    <th><div class="day-header"><span class="day-name">Mon</span><span class="day-date">--</span></div></th>
                    <th><div class="day-header"><span class="day-name">Tue</span><span class="day-date">--</span></div></th>
                    <th><div class="day-header"><span class="day-name">Wed</span><span class="day-date">--</span></div></th>
                    <th><div class="day-header"><span class="day-name">Thu</span><span class="day-date">--</span></div></th>
                    <th><div class="day-header"><span class="day-name">Fri</span><span class="day-date">--</span></div></th>
                    <th><div class="day-header"><span class="day-name">Sat</span><span class="day-date">--</span></div></th>
                    <th><div class="day-header"><span class="day-name">Sun</span><span class="day-date">--</span></div></th>
                </tr>
            </thead>
            <tbody id="scheduleTableBody">
                <!-- Rows will be populated by JavaScript -->
                <!-- Example structure removed, JS will build everything -->
                <tr>
                    <td colspan="8" style="text-align: center; padding: 3rem; color: var(--gray);">
                        <i class="fas fa-spinner fa-spin"></i> Loading schedule...
                    </td>
                 </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Toast Notification Container -->
<div class="toast" id="scheduleToastNotification"></div>

<!-- Modals -->
<div class="modal" id="employeeModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add Employee to System</h2>
            <button class="close-modal" id="closeEmployeeModal" title="Close">×</button>
        </div>
        <form id="employeeForm" novalidate> <!-- Added novalidate -->
            <div class="form-group">
                <label for="empName">Full Name</label>
                <input type="text" id="empName" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="empEmail">Email</label>
                <input type="email" id="empEmail" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="empPosition">Position (Optional)</label>
                <input type="text" id="empPosition" class="form-control">
            </div>
            <div class="form-group">
                <label for="empRole">System Role</label>
                <select id="empRole" class="form-control" required>
                    <option value="" disabled selected>Select role...</option> <!-- Added placeholder -->
                    <option value="member">Member</option>
                    <option value="senior">Senior</option>
                    <option value="supervisor">Supervisor</option>
                    <option value="admin">Admin</option>
                </select>
                <small>This sets their role in the main application.</small>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-outline" id="cancelEmployeeBtn">Cancel</button>
                <button type="submit" class="btn btn-primary">Add Employee</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="shiftModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Edit Shift</h2>
            <button class="close-modal" id="closeShiftModal" title="Close">×</button>
        </div>
        <form id="shiftForm" novalidate> <!-- Added novalidate -->
             <input type="hidden" id="editEmpId">
             <input type="hidden" id="editDay">
             <input type="hidden" id="editCellId">

            <div class="form-group">
                <label for="shiftEmployeeDisplay">Employee</label>
                <input type="text" id="shiftEmployeeDisplay" class="form-control" readonly>
            </div>
            <div class="form-group">
                <label for="shiftDate">Date</label>
                <input type="date" id="shiftDate" class="form-control" required readonly>
            </div>
            <div class="form-group">
                <label for="shiftType">Shift Type</label>
                <select id="shiftType" class="form-control" required>
                    <option value="morning">Morning (9AM-5PM)</option>
                    <option value="afternoon">Afternoon (12PM-8PM)</option>
                    <option value="night">Night (5PM-1AM)</option>
                    <option value="day-off">Day Off</option>
                    <option value="sick-leave">Sick Leave</option>
                    <option value="vacation">Vacation</option>
                    <option value="custom">Custom</option>
                    <option value="clear">-- Clear Shift --</option>
                </select>
            </div>
            <div class="form-group" id="customShiftGroup" style="display: none;">
                <label for="customShift">Custom Shift Times</label>
                <input type="text" id="customShift" class="form-control" placeholder="e.g., 10AM-6PM">
                 <small>Enter start and end time.</small>
            </div>
            <div class="form-group">
                <label for="shiftNotes">Notes (Optional)</label>
                <textarea id="shiftNotes" class="form-control" rows="2"></textarea>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-outline" id="cancelShiftBtn">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
<!-- END OF FILE employee-schedule.txt (HTML/CSS ONLY) -->
