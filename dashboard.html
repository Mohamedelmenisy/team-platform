<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeamFlow | Dashboard (Simplified)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" sizes="32x32" href="https://img.icons8.com/fluency/48/000000/group-task.png">
    <style>
        /* --- CORE DASHBOARD CSS --- */
        :root {
            --primary: #2563eb; --primary-dark: #1e3a8a; --primary-light: #dbeafe; --secondary: #10b981;
            --danger: #ef4444; --warning: #f59e0b; --dark: #1e293b; --light: #f8fafc; --gray: #64748b;
            --light-gray: #e2e8f0; --white: #ffffff; --sidebar-width: 280px; --sidebar-bg: #1e3a8a;
            --sidebar-text: rgba(255,255,255,0.9); --sidebar-hover: rgba(255,255,255,0.1); --sidebar-active: rgba(255,255,255,0.2);
            --sidebar-divider: rgba(255,255,255,0.1); --success: #10b981; --team-manager: #ef4444;
            --compact-padding: 0.5rem; --normal-padding: 1rem; --spacious-padding: 1.5rem; --primary-rgb: 37, 99, 235;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--primary-light); color: var(--dark); display: flex; min-height: 100vh; }
        /* ... (Keep ALL original CSS from dash1.html: .sidebar, .main-content, .top-nav, etc.) ... */
        .content-section { display: none; background-color: var(--white); border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); padding: 2rem; }
        .content-section.active { display: block; }
        /* ... (Keep other specific styles for dashboard, profile, settings) ... */

        /* --- EMPLOYEE SCHEDULING CSS (Scoped with #employeeSchedulingContent) --- */
        #employeeSchedulingContent .main-container { max-width: 100%; margin: 0; padding: 0; }
        #employeeSchedulingContent .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
        #employeeSchedulingContent .page-title { font-size: 1.5rem; color: var(--primary-dark); font-weight: 600; }
        /* ... (Keep ALL other scoped CSS rules for the schedule section) ... */
        #employeeSchedulingContent .week-display { font-weight: 600; min-width: 180px; text-align: center; color: var(--dark); }
        #employeeSchedulingContent .schedule-table { width: 100%; min-width: 700px; border-collapse: collapse; }
        /* ... etc ... */
    </style>
</head>
<body class="blue-theme">
    <aside class="sidebar" id="sidebar">
         <div class="sidebar-header"><div class="logo"><i class="fas fa-users-cog logo-icon"></i><span>TeamFlow</span></div></div>
         <div class="sidebar-menu">
             <div class="menu-title">Navigation</div>
             <a href="#dashboard" class="menu-item active" data-section-id="dashboardContent"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
             <a href="#projects" class="menu-item" data-section-id="projectsContent"><i class="fas fa-briefcase"></i><span>Projects</span></a>
             <a href="#reports-analytics" class="menu-item" data-section-id="reportsAnalyticsContent"><i class="fas fa-chart-line"></i><span>Reports & Analytics</span></a>
             <a href="#team-members-view" class="menu-item" data-section-id="teamMembersViewContent"><i class="fas fa-users"></i><span>Team Members</span></a>
             <div class="menu-title">Core Features</div>
             <a href="#file-sharing" class="menu-item" data-section-id="fileSharingContent"><i class="fas fa-file-upload"></i><span>File Sharing</span></a>
             <a href="#data-management" class="menu-item" data-section-id="dataManagementContent"><i class="fas fa-database"></i><span>Data Management</span></a>
             <a href="#project-tracking" class="menu-item" data-section-id="projectTrackingContent"><i class="fas fa-project-diagram"></i><span>Project Tracking</span></a>
             <a href="#task-management" class="menu-item" data-section-id="taskManagementContent"><i class="fas fa-tasks"></i><span>Task Management</span></a>
             <div class="menu-title">Team Tools</div>
             <a href="#employee-scheduling" class="menu-item" data-section-id="employeeSchedulingContent"><i class="fas fa-user-clock"></i><span>Employee Scheduling</span></a>
             <a href="#team-calendar" class="menu-item" data-section-id="teamCalendarContent"><i class="fas fa-calendar-alt"></i><span>Team Calendar</span></a>
             <a href="#deadline-tracking" class="menu-item" data-section-id="deadlineTrackingContent"><i class="fas fa-clock"></i><span>Deadline Tracking</span></a>
             <a href="#innovation-hub" class="menu-item" data-section-id="innovationHubContent"><i class="fas fa-lightbulb"></i><span>Innovation Hub</span></a>
             <div class="menu-divider"></div>
             <a href="#settings" class="menu-item" data-section-id="settingsContent"><i class="fas fa-cog"></i><span>Settings</span></a>
         </div>
         <div class="connection-status"><div class="status-dot"></div><span>Online</span></div>
    </aside>

    <main class="main-content">
        <nav class="top-nav"> <!-- ... (Top Nav HTML as before) ... --> </nav>
        <div class="content-area">
            <div class="back-button" id="backButton" style="display: none;"><i class="fas fa-arrow-left"></i><span>Back to Dashboard</span></div>

            <!-- Static Sections (Initially hidden except dashboard) -->
            <div id="dashboardContent" class="content-section active"><h2>Dashboard</h2><p>Welcome content...</p><!-- ... (Dashboard content) ... --></div>
            <div id="profileContent" class="content-section" style="display: none;"><h2>Profile</h2><!-- ... (Profile content) ... --></div>
            <div id="settingsContent" class="content-section" style="display: none;"><h2>Settings</h2><!-- ... (Settings content) ... --></div>
            <!-- Add placeholders for other static sections linked in sidebar -->
             <div id="projectsContent" class="content-section" style="display: none;"><h2>Projects</h2><p>Projects content goes here.</p></div>
             <div id="reportsAnalyticsContent" class="content-section" style="display: none;"><h2>Reports & Analytics</h2><p>Reports content goes here.</p></div>
             <div id="teamMembersViewContent" class="content-section" style="display: none;"><h2>Team Members</h2><p>Team Members view content goes here.</p></div>
             <div id="fileSharingContent" class="content-section" style="display: none;"><h2>File Sharing</h2><p>File Sharing content goes here.</p></div>
             <div id="dataManagementContent" class="content-section" style="display: none;"><h2>Data Management</h2><p>Data Management content goes here.</p></div>
             <div id="projectTrackingContent" class="content-section" style="display: none;"><h2>Project Tracking</h2><p>Project Tracking content goes here.</p></div>
             <div id="taskManagementContent" class="content-section" style="display: none;"><h2>Task Management</h2><p>Task Management content goes here.</p></div>
             <div id="teamCalendarContent" class="content-section" style="display: none;"><h2>Team Calendar</h2><p>Team Calendar content goes here.</p></div>
             <div id="deadlineTrackingContent" class="content-section" style="display: none;"><h2>Deadline Tracking</h2><p>Deadline Tracking content goes here.</p></div>
             <div id="innovationHubContent" class="content-section" style="display: none;"><h2>Innovation Hub</h2><p>Innovation Hub content goes here.</p></div>

            <!-- === Employee Scheduling Content (STATICALLY INCLUDED & initially hidden) === -->
            <div id="employeeSchedulingContent" class="content-section employee-schedule-section" style="display: none;">
                <!-- Main Content -->
                <div class="main-container">
                    <div class="page-header">
                        <h1 class="page-title">Employee Schedule</h1>
                        <div>
                            <button class="btn btn-primary" id="schedule-addEmployeeBtn" style="display: none;"><i class="fas fa-plus"></i> Add Employee</button>
                            <button class="btn btn-secondary" id="schedule-sendRemindersBtn" style="display: none;"><i class="fas fa-envelope"></i> Send Reminders</button>
                        </div>
                    </div>
                    <div class="schedule-controls">
                        <div class="week-navigation">
                            <button class="btn btn-outline" id="schedule-prevWeekBtn"><i class="fas fa-chevron-left"></i></button>
                            <div class="week-display" id="schedule-weekDisplay">Week Placeholder</div>
                            <button class="btn btn-outline" id="schedule-nextWeekBtn"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <button class="btn btn-primary" id="schedule-saveScheduleBtn" style="display: none;"><i class="fas fa-save"></i> Save Schedule</button>
                    </div>
                    <div class="schedule-container">
                        <table class="schedule-table">
                            <thead>
                                <tr><th>Employee</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th><th>Sun</th></tr>
                            </thead>
                            <tbody id="schedule-table-body">
                                <!-- JS will populate this, or show message if empty -->
                                <tr><td colspan="8" style="text-align:center;padding:2rem;color:var(--gray);">Schedule content will load here.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Modals (Included but hidden) -->
                 <div class="modal" id="schedule-employeeModal"> <!-- ... (Employee Modal HTML) ... --> </div>
                 <div class="modal" id="schedule-shiftModal"> <!-- ... (Shift Modal HTML) ... --> </div>
            </div>
            <!-- === END Employee Scheduling Content === -->

        </div>
    </main>
    <div class="notifications-modal" id="notificationsModal"> <!-- ... --> </div>
    <div class="confirm-modal" id="confirmModal"> <!-- ... --> </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM Loaded. Setting up basic navigation...");

            // --- Get Elements Needed for Navigation ---
            const menuItems = document.querySelectorAll('.menu-item');
            const allContentSections = document.querySelectorAll('.content-section'); // Get all sections
            const backButton = document.getElementById('backButton');

            // --- Simple Function to Show/Hide Sections ---
            function showSection(sectionId) {
                console.log("Attempting to show section:", sectionId);
                let sectionFound = false;
                allContentSections.forEach(section => {
                    if (section.id === sectionId) {
                        section.style.display = 'block';
                        section.classList.add('active'); // Optional: if needed by styles
                        sectionFound = true;
                         console.log("Showing:", section.id);
                    } else {
                        section.style.display = 'none';
                        section.classList.remove('active');
                    }
                });

                if (!sectionFound) {
                    console.error("Section not found:", sectionId);
                     // Optionally show a default section or an error message
                     document.getElementById('dashboardContent').style.display = 'block'; // Fallback to dashboard
                }

                // Update Menu Active State
                menuItems.forEach(item => {
                    item.classList.toggle('active', item.dataset.sectionId === sectionId);
                });

                 // Show/Hide Back Button
                 if (backButton) {
                     backButton.style.display = sectionId !== 'dashboardContent' ? 'inline-flex' : 'none';
                 }

                 // Update URL Hash
                 window.location.hash = sectionId.replace('Content', ''); // Update hash based on section ID

                 // **** TEMPORARILY DISABLED SCHEDULE LOGIC ****
                 // We will add the schedule initialization logic back later
                 // if (sectionId === 'employeeSchedulingContent') {
                 //     // Call schedule init function here in the future
                 //     console.log("TODO: Initialize Employee Scheduling logic here.");
                 // }
            }

            // --- Event Listeners for Navigation ---
            menuItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetSectionId = item.dataset.sectionId;
                    if (targetSectionId) {
                        showSection(targetSectionId);
                    } else {
                        console.error("Menu item missing data-section-id:", item);
                    }
                });
            });

            if (backButton) {
                backButton.addEventListener('click', () => {
                    showSection('dashboardContent'); // Go back to dashboard
                });
            }

            // --- Handle Initial Page Load Based on Hash ---
            function handleInitialLoad() {
                 let initialSectionId = 'dashboardContent'; // Default
                 const hash = window.location.hash.substring(1);
                 if (hash) {
                     // Convert hash to section ID (e.g., #employee-scheduling -> employeeSchedulingContent)
                     const potentialId = `${hash}Content`;
                     // Check if an element with this ID exists
                     if (document.getElementById(potentialId)) {
                         initialSectionId = potentialId;
                     } else {
                         console.warn(`Initial hash #${hash} does not correspond to a known section ID.`);
                     }
                 }
                 console.log("Handling initial load, showing section:", initialSectionId);
                 showSection(initialSectionId);
            }

            // --- Handle Browser Back/Forward ---
            window.addEventListener('popstate', (event) => {
                console.log("Popstate triggered");
                handleInitialLoad(); // Re-evaluate hash on back/forward
            });

            // --- Run Initial Load ---
            handleInitialLoad();

            console.log("Basic navigation setup complete.");

             // --- TODO: Add back other core dashboard logic (data loading, user UI, stats, etc.) ---
             // --- TODO: Add back integrated employee scheduling logic & call it in showSection ---

        }); // End DOMContentLoaded
    </script>
</body>
</html>
