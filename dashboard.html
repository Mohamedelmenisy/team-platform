<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeamFlow | Dashboard</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://img.icons8.com/fluency/48/000000/group-task.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://img.icons8.com/fluency/32/000000/group-task.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://img.icons8.com/fluency/180/000000/group-task.png">

    <!-- !!! CSS الخاص بجدول الموظفين - يجب أن يكون الملف موجوداً بنفس المجلد !!! -->
    <link rel="stylesheet" href="employee-scheduling.css">
    <!-- <link rel="stylesheet" href="projects.css"> -->

    <style>
        /* --- أنماط الداشبورد الأساسية (نسخة كاملة من finaaaal.txt) --- */
        :root {
            --primary: #2563eb; --primary-dark: #1e3a8a; --primary-light: #dbeafe; --secondary: #10b981; --danger: #ef4444; --warning: #f59e0b; --dark: #1e293b; --light: #f8fafc; --gray: #64748b; --light-gray: #e2e8f0; --white: #ffffff; --sidebar-width: 280px; --sidebar-bg: #1e3a8a; --sidebar-text: rgba(255,255,255,0.9); --sidebar-hover: rgba(255,255,255,0.1); --sidebar-active: rgba(255,255,255,0.2); --sidebar-divider: rgba(255,255,255,0.1); --success: #10b981; --team-manager: #ef4444; --compact-padding: 0.5rem; --normal-padding: 1rem; --spacious-padding: 1.5rem; --stat-card-bg-1: linear-gradient(135deg, #e0f2fe, #bae6fd); --stat-card-bg-2: linear-gradient(135deg, #dcfce7, #bbf7d0); --stat-card-bg-3: linear-gradient(135deg, #fef3c7, #fde68a); --stat-card-bg-4: linear-gradient(135deg, #fee2e2, #fecaca); --welcome-bg-1: linear-gradient(135deg, var(--primary-dark), #172554); --welcome-bg-2: linear-gradient(135deg, #064e3b, #065f46); --welcome-bg-3: linear-gradient(135deg, #4a044e, #6b21a8); --welcome-bg-current: var(--welcome-bg-1); --hc-text: #000000; --hc-background: #ffffff; --hc-primary: #0000ff; --hc-secondary: #008000; --hc-link: #0000ee; --hc-border: #000000; --text-color: var(--dark); --schedule-weekend-bg: #f3f4f6; --schedule-weekend-text: #9ca3af;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        html, body { height: 100%; } /* Ensure body takes full height */
        body { background-color: var(--primary-light); color: var(--text-color); display: flex; min-height: 100vh; transition: background-color 0.3s ease, color 0.3s ease; }
        body.high-contrast { --dark: var(--hc-text); --light: var(--hc-background); --gray: var(--hc-text); --light-gray: var(--hc-border); --white: var(--hc-background); --primary: var(--hc-primary); --primary-dark: var(--hc-primary); --primary-light: #e0e0ff; --secondary: var(--hc-secondary); --sidebar-bg: var(--hc-background); --sidebar-text: var(--hc-text); --sidebar-hover: #e0e0e0; --sidebar-active: #c0c0c0; --sidebar-divider: var(--hc-border); --text-color: var(--hc-text); color: var(--text-color); background-color: var(--hc-background); }
        body.high-contrast .welcome-section, body.high-contrast .stat-card, body.high-contrast .top-nav, body.high-contrast .sidebar, body.high-contrast .activity-section, body.high-contrast .content-section { background: var(--hc-background); border: 1px solid var(--hc-border); color: var(--text-color); }
        body.high-contrast .btn, body.high-contrast .form-control, body.high-contrast .search-bar input { border: 1px solid var(--hc-border); }
        body.high-contrast .btn-primary { background-color: var(--hc-primary); color: var(--hc-background); }
        body.high-contrast .logo { color: var(--text-color); } body.high-contrast .logo-icon { color: var(--hc-primary); } body.high-contrast .menu-item { color: var(--text-color); border-left-color: transparent; } body.high-contrast .menu-item.active { background-color: #c0c0c0; border-left-color: var(--hc-primary); } body.high-contrast .stat-card { border-left-width: 3px; background: var(--hc-background); } body.high-contrast .welcome-section { background: var(--hc-background); }
        .sidebar { width: var(--sidebar-width); background-color: var(--sidebar-bg); height: 100vh; position: fixed; top: 0; left: 0; overflow-y: auto; transition: transform 0.3s ease-in-out; z-index: 100; display: flex; flex-direction: column; }
        .sidebar-header { padding: 1.5rem; border-bottom: 1px solid var(--sidebar-divider); display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; } .logo { font-size: 1.25rem; font-weight: 700; color: var(--white); display: flex; align-items: center; gap: 0.75rem; } .logo-icon { color: var(--white); font-size: 1.5rem; } .sidebar-menu { padding: 1rem 0; flex-grow: 1; overflow-y: auto; } .menu-title { padding: 0.75rem 1.5rem; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; color: rgba(255,255,255,0.6); letter-spacing: 0.5px; } .menu-item { display: flex; align-items: center; padding: 0.75rem 1.5rem; color: var(--sidebar-text); text-decoration: none; transition: all 0.2s; border-left: 3px solid transparent; margin: 0.25rem 0; cursor: pointer;} .menu-item:hover { background-color: var(--sidebar-hover); color: var(--white); } .menu-item.active { background-color: var(--sidebar-active); color: var(--white); border-left-color: var(--white); font-weight: 600;} .menu-item i { margin-right: 0.75rem; font-size: 1.1rem; width: 24px; text-align: center; } .menu-divider { height: 1px; background-color: var(--sidebar-divider); margin: 1rem 1.5rem; } .connection-status { padding: 0.75rem 1.5rem; margin-top: auto; border-top: 1px solid var(--sidebar-divider); display: flex; align-items: center; gap: 0.5rem; color: rgba(16, 185, 129, 0.9); font-size: 0.85rem; flex-shrink: 0; } .status-dot { width: 8px; height: 8px; border-radius: 50%; background-color: var(--success); animation: pulseStatus 2s infinite; } @keyframes pulseStatus { 0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); } 50% { box-shadow: 0 0 0 5px rgba(16, 185, 129, 0); } }
        .main-content { flex: 1; margin-left: var(--sidebar-width); transition: margin-left 0.3s ease-in-out; }
        .top-nav { background-color: var(--white); padding: var(--normal-padding) 2rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--light-gray); position: sticky; top: 0; z-index: 90; transition: padding 0.3s ease, background-color 0.3s ease, border-color 0.3s ease; }
        body.compact .top-nav { padding: var(--compact-padding) 1rem; } body.spacious .top-nav { padding: var(--spacious-padding) 2rem; } .search-bar { position: relative; width: 400px; } .search-bar input { width: 100%; padding: 0.75rem 1rem 0.75rem 2.5rem; border: 1px solid var(--light-gray); border-radius: 6px; font-size: 0.9rem; transition: all 0.2s; background-color: var(--white); color: var(--text-color); } .search-bar input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); } .search-icon { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--gray); } .search-results { position: absolute; top: calc(100% + 5px); left: 0; width: 100%; background-color: var(--white); border: 1px solid var(--light-gray); border-radius: 6px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); z-index: 100; display: none; max-height: 300px; overflow-y: auto; } .search-results.active { display: block; animation: fadeInDropdown 0.2s ease-out; } .search-result-item { padding: 0.75rem 1rem; cursor: pointer; transition: background-color 0.2s; color: var(--text-color); display: flex; align-items: center; gap: 0.75rem; } .search-result-item i { color: var(--gray); } .search-result-item:hover { background-color: var(--primary-light); } .user-menu { display: flex; align-items: center; gap: 1.5rem; } .notification-icon { position: relative; color: var(--gray); cursor: pointer; font-size: 1.1rem; } .notification-badge { position: absolute; top: -5px; right: -5px; background-color: var(--danger); color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: 600; animation: pulseBadge 1.5s infinite alternate; } @keyframes pulseBadge { from { transform: scale(1); } to { transform: scale(1.1); } } .user-profile { display: flex; align-items: center; gap: 0.75rem; position: relative; } .user-avatar { width: 36px; height: 36px; border-radius: 50%; background-color: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; cursor: pointer; background-size: cover; background-position: center; } .user-profile-details { display: flex; align-items: center; cursor: pointer; } .user-name { font-weight: 500; color: var(--text-color); } .user-status { font-size: 0.8rem; color: var(--success); margin-left: 0.5rem; font-weight: 600; text-shadow: 0 0 4px rgba(16, 185, 129, 0.4); } .user-dropdown { position: absolute; top: calc(100% + 10px); right: 0; background-color: var(--white); border: 1px solid var(--light-gray); border-radius: 6px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); width: 200px; z-index: 100; display: none; animation: fadeInDropdown 0.2s ease-out; } @keyframes fadeInDropdown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } } .user-dropdown.active { display: block; } .dropdown-item { padding: 0.75rem 1rem; display: flex; align-items: center; gap: 0.75rem; color: var(--text-color); text-decoration: none; transition: background-color 0.2s; font-size: 0.9rem; cursor: pointer; } .dropdown-item:hover { background-color: var(--light); } .dropdown-item i { width: 20px; text-align: center; color: var(--gray); }
        .content-area { padding: 2rem; min-height: calc(100vh - 70px); transition: padding 0.3s ease; }
        body.compact .content-area { padding: 1rem; } body.spacious .content-area { padding: 3rem; } .welcome-section { background: var(--welcome-bg-current); color: var(--white); padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: padding 0.3s ease, margin-bottom 0.3s ease, background 1s ease-in-out; } body.compact .welcome-section { padding: 1rem; margin-bottom: 1rem; } body.spacious .welcome-section { padding: 3rem; margin-bottom: 3rem; } .welcome-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: inherit; } body.compact .welcome-title { font-size: 1.25rem; } .welcome-subtitle { font-size: 1rem; opacity: 0.9; margin-top: 0.25rem; margin-bottom: 1.5rem; font-weight: 400; color: inherit; } body.compact .welcome-subtitle { font-size: 0.9rem; margin-bottom: 1rem;} .user-info { display: flex; align-items: center; gap: 1.5rem; margin-top: 1.5rem; } body.compact .user-info { flex-direction: column; text-align: center; gap: 1rem; margin-top: 1rem; } .user-info-avatar { width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary-light); color: var(--primary); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1.75rem; background-size: cover; background-position: center; position: relative; cursor: default; border: 3px solid rgba(255, 255, 255, 0.5); box-shadow: 0 0 10px rgba(0,0,0,0.2); } body.compact .user-info-avatar { width: 60px; height: 60px; font-size: 1.25rem; } .user-info-details { flex: 1; } .user-info-name { font-weight: 600; font-size: 1.25rem; margin-bottom: 0.25rem; color: inherit;} body.compact .user-info-name { font-size: 1rem; } .user-info-title { opacity: 0.9; font-size: 0.9rem; margin-bottom: 0.5rem; color: var(--light-gray); font-weight: 600; text-transform: capitalize; } .user-info-title.role-admin { color: var(--team-manager); font-weight: 700; text-shadow: 0 0 3px rgba(239, 68, 68, 0.5); } .user-info-title.role-supervisor { color: var(--warning); font-weight: 700; } .user-info-title.role-senior { color: var(--secondary); font-weight: 700; } body.compact .user-info-title { font-size: 0.8rem; } .user-info-email { display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; opacity: 0.9; color: inherit; } .user-info-email span { color: inherit; }
        .stats-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; transition: gap 0.3s ease, margin-bottom 0.3s ease; } body.compact .stats-section { gap: 1rem; margin-bottom: 1rem; } body.spacious .stats-section { gap: 2rem; margin-bottom: 3rem; } .stat-card { background: var(--white); border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08); transition: transform 0.2s, box-shadow 0.2s, padding 0.3s ease, background-color 0.3s ease; position: relative; overflow: hidden; border-left: 5px solid var(--primary); color: var(--dark); } .stat-card:nth-child(1) { border-left-color: var(--primary); background: var(--stat-card-bg-1); } .stat-card:nth-child(2) { border-left-color: var(--secondary); background: var(--stat-card-bg-2); } .stat-card:nth-child(3) { border-left-color: var(--warning); background: var(--stat-card-bg-3); } .stat-card:nth-child(4) { border-left-color: var(--danger); background: var(--stat-card-bg-4); } body.compact .stat-card { padding: 1rem; } body.spacious .stat-card { padding: 2rem; } .stat-card:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); } .stat-title { font-size: 0.9rem; color: var(--text-color); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; } body.compact .stat-title { font-size: 0.8rem; } .stat-title i { opacity: 0.8; } .stat-value { font-size: 1.75rem; font-weight: 700; color: var(--primary-dark); display: flex; align-items: center; justify-content: space-between; } .stat-card:nth-child(1) .stat-value { color: #1e40af; } .stat-card:nth-child(2) .stat-value { color: #15803d; } .stat-card:nth-child(3) .stat-value { color: #b45309; } .stat-card:nth-child(4) .stat-value { color: #b91c1c; } body.compact .stat-value { font-size: 1.5rem; } .stat-trend { display: flex; align-items: center; font-size: 0.9rem; font-weight: 500; } body.compact .stat-trend { font-size: 0.8rem; } .trend-up { color: var(--secondary); } .trend-down { color: var(--danger); } .trend-neutral { color: var(--gray); }
        .activity-section { background-color: var(--white); border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); padding: 1.5rem; transition: padding 0.3s ease, background-color 0.3s ease; } body.compact .activity-section { padding: 1rem; } body.spacious .activity-section { padding: 2rem; } .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; transition: margin-bottom 0.3s ease; flex-wrap: wrap; gap: 0.5rem; } body.compact .section-header { margin-bottom: 1rem; } body.spacious .section-header { margin-bottom: 2rem; } .section-title { font-size: 1.25rem; font-weight: 600; color: var(--text-color); } body.compact .section-title { font-size: 1.1rem; } .live-badge { display: inline-flex; align-items: center; background-color: var(--danger); color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-left: 0.5rem; animation: pulse 2s infinite; } @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } } .section-header > div { display: flex; align-items: center; gap: 1rem;} .view-all, .delete-all { font-weight: 500; cursor: pointer; transition: color 0.2s, background-color 0.2s; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; } .view-all { color: var(--primary); } .view-all:hover { color: var(--primary-dark); text-decoration: underline; background-color: var(--primary-light); } .delete-all { color: var(--danger); } .delete-all:hover { color: #dc2626; text-decoration: underline; background-color: rgba(239, 68, 68, 0.1); } .activity-list { list-style: none; padding-left: 0; max-height: 400px; overflow-y: auto; } .activity-item { display: flex; padding: 1rem 0; border-bottom: 1px solid var(--light-gray); align-items: center; transition: background-color 0.3s, padding 0.3s ease, border-color 0.3s ease; } body.compact .activity-item { padding: 0.75rem 0; } body.spacious .activity-item { padding: 1.25rem 0; } .activity-item:last-child { border-bottom: none; } .activity-item.new-activity { background-color: rgba(37, 99, 235, 0.08); animation: highlightNewActivity 2.5s ease-out forwards; } @keyframes highlightNewActivity { 0% { background-color: rgba(37, 99, 235, 0.15); } 100% { background-color: transparent; } } .activity-icon { width: 40px; height: 40px; border-radius: 50%; background-color: rgba(37, 99, 235, 0.1); color: var(--primary); display: flex; align-items: center; justify-content: center; margin-right: 1rem; flex-shrink: 0; transition: width 0.3s, height 0.3s, margin-right 0.3s, font-size 0.3s; } body.compact .activity-icon { width: 32px; height: 32px; margin-right: 0.75rem; font-size: 0.9rem; } .activity-content { flex: 1; } .activity-message { margin-bottom: 0.25rem; color: var(--text-color); } body.compact .activity-message { font-size: 0.9rem; } .activity-time { font-size: 0.8rem; color: var(--gray); } body.compact .activity-time { font-size: 0.7rem; } .activity-actions { display: flex; gap: 0.5rem; margin-left: auto; padding-left: 1rem; } .delete-activity { color: var(--danger); cursor: pointer; opacity: 0.6; transition: opacity 0.2s, background-color 0.2s; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; } .activity-item:hover .delete-activity { opacity: 1; } .delete-activity:hover { opacity: 1; background-color: rgba(239, 68, 68, 0.1); }
        .content-section { background-color: var(--white); border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); padding: 2rem; transition: padding 0.3s ease, background-color 0.3s ease; display: none; animation: fadeInContent 0.4s ease-in-out; } .content-section.active { display: block; } @keyframes fadeInContent { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } } body.compact .content-section { padding: 1rem; } body.spacious .content-section { padding: 3rem; } .section-main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; transition: margin-bottom 0.3s ease; } body.compact .section-main-header { margin-bottom: 1.5rem; } body.spacious .section-main-header { margin-bottom: 3rem; } .section-main-title { font-size: 1.5rem; font-weight: 600; color: var(--primary-dark); } body.compact .section-main-title { font-size: 1.25rem; } .profile-header-text { margin-bottom: 2rem; color: var(--gray); font-size: 0.95rem;} .profile-avatar-section { text-align: center; margin-bottom: 2rem; } #profileAvatarLarge { width: 120px; height: 120px; border-radius: 50%; background-color: var(--primary-light); color: var(--primary-dark); display: inline-flex; align-items: center; justify-content: center; font-weight: 600; font-size: 3rem; background-size: cover; background-position: center; margin-bottom: 1rem; border: 3px solid var(--white); box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; position: relative; overflow: hidden; } #profileAvatarLarge::after { content: '\f0ee'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.5); color: white; padding: 5px 0; font-size: 1rem; opacity: 0; transition: opacity 0.3s; } #profileAvatarLarge:hover::after { opacity: 1; } #uploadPhotoButton { display: none; }
        .data-form { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; transition: gap 0.3s ease; } body.compact .data-form { gap: 1rem; } body.spacious .data-form { gap: 2rem; } .form-group { margin-bottom: 1rem; transition: margin-bottom 0.3s ease; } body.compact .form-group { margin-bottom: 0.75rem; } body.spacious .form-group { margin-bottom: 1.5rem; } .form-group label, .settings-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-color); transition: margin-bottom 0.3s ease, font-size 0.3s ease; } body.compact .form-group label, body.compact .settings-label { margin-bottom: 0.25rem; font-size: 0.9rem; } .form-control { width: 100%; padding: 0.75rem; border: 1px solid var(--light-gray); border-radius: 6px; font-size: 1rem; background-color: var(--white); color: var(--text-color); transition: border-color 0.2s, box-shadow 0.2s, padding 0.3s ease, font-size 0.3s ease, background-color 0.3s ease, color 0.3s ease; } body.compact .form-control { padding: 0.5rem; font-size: 0.9rem; } body.spacious .form-control { padding: 1rem; } .form-control:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); } .form-control[readonly] { background-color: var(--light-gray); cursor: not-allowed; opacity: 0.7; } .form-actions { grid-column: span 2; display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1rem; transition: margin-top 0.3s ease; } body.compact .form-actions { margin-top: 0.5rem; } body.spacious .form-actions { margin-top: 2rem; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s; border: none; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; } body.compact .btn { padding: 0.5rem 1rem; font-size: 0.9rem; } body.spacious .btn { padding: 1rem 2rem; } .btn-primary { background-color: var(--primary); color: white; } .btn-primary:hover:not(:disabled) { background-color: var(--primary-dark); } .btn-outline { background-color: transparent; border: 1px solid var(--primary); color: var(--primary); } .btn-outline:hover:not(:disabled) { background-color: var(--primary-light); } .btn-warning { background-color: var(--warning); color: var(--primary-dark); } .btn-warning:hover:not(:disabled) { background-color: #d97706; } .btn-danger { background-color: var(--danger); color: white; } .btn-danger:hover:not(:disabled) { background-color: #dc2626; } .btn-success { background-color: var(--success); color: white; } .btn-success:hover:not(:disabled) { background-color: #0d9f6e; } .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .settings-tabs { display: flex; border-bottom: 1px solid var(--light-gray); margin-bottom: 2rem; transition: margin-bottom 0.3s ease, border-color 0.3s ease; overflow-x: auto; } body.compact .settings-tabs { margin-bottom: 1.5rem; } body.spacious .settings-tabs { margin-bottom: 3rem; } .settings-tab { padding: 0.75rem 1.5rem; cursor: pointer; border-bottom: 2px solid transparent; font-weight: 500; color: var(--gray); transition: all 0.2s; white-space: nowrap; } body.compact .settings-tab { padding: 0.5rem 1rem; font-size: 0.9rem; } body.spacious .settings-tab { padding: 1rem 2rem; } .settings-tab:hover { color: var(--primary); } .settings-tab.active { color: var(--primary); border-bottom-color: var(--primary); font-weight: 600;} .settings-tab.disabled { color: var(--light-gray); cursor: not-allowed; pointer-events: none; } .settings-panel { display: none; } .settings-panel.active { display: block; animation: fadeInPanel 0.5s ease-out; } @keyframes fadeInPanel { from { opacity: 0; } to { opacity: 1; } } .settings-subsection { margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--light-gray); } .settings-subsection:first-child { margin-top: 0; padding-top: 0; border-top: none; } .settings-subsection h4 { font-size: 1.1rem; font-weight: 600; color: var(--primary-dark); margin-bottom: 1rem; } .setting-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding: 0.5rem 0; flex-wrap: wrap; } .setting-item > div:first-child { flex-basis: 100%; margin-bottom: 0.5rem; } @media (min-width: 768px) { .setting-item > div:first-child { flex-basis: auto; margin-bottom: 0; } } .setting-item-label { font-weight: 500; color: var(--text-color); } .setting-item-description { font-size: 0.9rem; color: var(--gray); margin-top: 0.25rem;} .setting-item-control { flex-shrink: 0; margin-left: 1rem; } @media (max-width: 767px) { .setting-item-control { margin-left: 0; width: 100%; margin-top: 0.5rem; } }
        .switch { position: relative; display: inline-block; width: 50px; height: 24px; flex-shrink: 0; } body.compact .switch { width: 40px; height: 20px; } .switch input { opacity: 0; width: 0; height: 0; } .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; } .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; } body.compact .slider:before { height: 14px; width: 14px; left: 3px; bottom: 3px; } input:checked + .slider { background-color: var(--primary); } input:checked + .slider:before { transform: translateX(26px); } body.compact input:checked + .slider:before { transform: translateX(20px); } .slider.round { border-radius: 34px; } .slider.round:before { border-radius: 50%; }
        .team-management { margin-top: 1.5rem; } body.compact .team-management { margin-top: 1rem; } body.spacious .team-management { margin-top: 2rem; } .team-management h3, .add-member-form h4 { color: var(--text-color); margin-bottom: 1rem; } .team-list { margin-top: 1rem; } body.compact .team-list { margin-top: 0.75rem; } body.spacious .team-list { margin-top: 1.5rem; } .team-member-card { display: flex; align-items: center; padding: 1rem; border: 1px solid var(--light-gray); border-radius: 8px; margin-bottom: 1rem; transition: all 0.2s; background-color: var(--white); } body.compact .team-member-card { padding: 0.75rem; margin-bottom: 0.75rem; } body.spacious .team-member-card { padding: 1.25rem; margin-bottom: 1.25rem; } .team-member-card:hover { box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); border-color: var(--primary); } .member-avatar { width: 50px; height: 50px; border-radius: 50%; background-color: var(--light-gray); margin-right: 1rem; display: flex; align-items: center; justify-content: center; font-weight: 600; background-size: cover; background-position: center; color: var(--primary-dark); transition: width 0.3s, height 0.3s, margin-right 0.3s, font-size 0.3s; flex-shrink: 0; } body.compact .member-avatar { width: 40px; height: 40px; margin-right: 0.75rem; font-size: 0.9rem; } .member-details { flex: 1; min-width: 0; } .member-name { font-weight: 500; margin-bottom: 0.25rem; color: var(--text-color); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;} body.compact .member-name { font-size: 0.9rem; } .member-email { font-size: 0.9rem; color: var(--gray); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;} body.compact .member-email { font-size: 0.8rem; } .member-role { padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; font-weight: 500; margin: 0 1rem; flex-shrink: 0; text-transform: capitalize; } body.compact .member-role { font-size: 0.7rem; margin: 0 0.75rem; } .role-admin { background-color: rgba(239, 68, 68, 0.1); color: var(--danger); } .role-senior { background-color: rgba(37, 99, 235, 0.1); color: var(--primary); } .role-supervisor { background-color: rgba(245, 158, 11, 0.1); color: var(--warning); } .role-member { background-color: rgba(16, 185, 129, 0.1); color: var(--secondary); } .member-actions { display: flex; gap: 0.5rem; flex-shrink: 0; } .member-actions .btn-sm { padding: 0.3rem 0.6rem; font-size: 0.8rem; } .add-member-form { margin-top: 2rem; padding: 1.5rem; border: 1px dashed var(--light-gray); border-radius: 8px; background-color: var(--light); } body.compact .add-member-form { margin-top: 1.5rem; padding: 1rem; } body.spacious .add-member-form { margin-top: 3rem; padding: 2rem; }
        .password-error { color: var(--danger); font-size: 0.85rem; margin-top: 0.25rem; display: none; } .spinner { width: 18px; height: 18px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: white; animation: spin 1s ease-in-out infinite; display: none; } @keyframes spin { to { transform: rotate(360deg); } } .btn .spinner { display: inline-block; } .btn.loading .spinner { display: inline-block; } .btn.loading span.btn-text { display: none; } .btn-outline .spinner { border-color: rgba(37, 99, 235, 0.3); border-top-color: var(--primary); }
        body.light-theme { --primary-light: #f1f5f9; --light: #ffffff; --white: #ffffff; --dark: #1e293b; --gray: #64748b; --light-gray: #e2e8f0; --text-color: var(--dark); background-color: var(--primary-light); }
        body.dark-theme { --primary: #3b82f6; --primary-dark: #1e40af; --primary-light: #1e293b; --light: #334155; --white: #0f172a; --dark: #e2e8f0; --gray: #94a3b8; --light-gray: #475569; --text-color: var(--dark); --schedule-weekend-bg: #262f3e; --schedule-weekend-text: #6b7280; background-color: var(--white); color: var(--text-color); }
        body.dark-theme .top-nav { background-color: var(--light); border-bottom-color: var(--light-gray); } body.dark-theme .stat-card, body.dark-theme .activity-section, body.dark-theme .content-section, body.dark-theme .team-member-card, body.dark-theme .add-member-form { background-color: var(--light); border-color: var(--light-gray); } body.dark-theme .search-bar input, body.dark-theme .form-control { background-color: var(--primary-light); border-color: var(--light-gray); color: var(--text-color); } body.dark-theme .form-control[readonly] { background-color: var(--light); opacity: 0.6; } body.dark-theme .search-results { background-color: var(--light); border-color: var(--light-gray); } body.dark-theme .search-result-item { color: var(--text-color); } body.dark-theme .search-result-item:hover { background-color: var(--primary-light); } body.dark-theme .user-dropdown { background-color: var(--light); border-color: var(--light-gray); } body.dark-theme .dropdown-item { color: var(--text-color); } body.dark-theme .dropdown-item:hover { background-color: var(--primary-light); } body.dark-theme .notifications-container { background-color: var(--light); } body.dark-theme .notification-list-item:hover { background-color: var(--primary-light); } body.dark-theme .notification-list-item.unread { background-color: rgba(59, 130, 246, 0.15); } body.dark-theme .confirm-container, body.dark-theme .modal-content { background-color: var(--light); color: var(--text-color); } body.dark-theme .theme-option div { border-color: var(--light-gray); } body.dark-theme .theme-option.selected div { border-color: var(--primary); } body.dark-theme .back-button { color: var(--primary); } body.dark-theme .back-button:hover { background-color: var(--light); color: #60a5fa; border-color: var(--primary); } body.dark-theme .notifications-footer { background-color: var(--light); border-top-color: var(--light-gray); } body.dark-theme .welcome-section { background: var(--welcome-bg-current); color: var(--white); } body.dark-theme .welcome-subtitle { color: inherit; opacity: 0.8; } body.dark-theme .user-info-name { color: inherit; } body.dark-theme .user-info-title { color: var(--gray); } body.dark-theme .user-info-title.role-admin { color: var(--team-manager); } body.dark-theme .user-info-email span { color: inherit; } body.dark-theme .stat-card { background: var(--light); color: var(--text-color);} body.dark-theme .stat-title { color: var(--text-color); } body.dark-theme .stat-card:nth-child(1) .stat-value { color: #93c5fd; } body.dark-theme .stat-card:nth-child(2) .stat-value { color: #86efac; } body.dark-theme .stat-card:nth-child(3) .stat-value { color: #fcd34d; } body.dark-theme .stat-card:nth-child(4) .stat-value { color: #fca5a5; } body.dark-theme .activity-icon { background-color: rgba(59, 130, 246, 0.1); color: #60a5fa; } body.dark-theme .activity-item { border-bottom-color: var(--light-gray); } body.dark-theme .activity-message { color: var(--text-color); } body.dark-theme .activity-time { color: var(--gray); } body.dark-theme .activity-item.new-activity { background-color: rgba(59, 130, 246, 0.1); } body.dark-theme .delete-activity:hover { background-color: rgba(239, 68, 68, 0.2); } body.dark-theme .profile-avatar-section label { color: var(--text-color); } body.dark-theme #profileAvatarLarge { background-color: var(--light); color: var(--text-color); border-color: var(--primary-light); } body.dark-theme .profile-header-text { color: var(--gray); } body.dark-theme .placeholder-content { color: var(--gray); border-color: var(--light-gray); } body.dark-theme .placeholder-content h2 { color: var(--text-color); } body.dark-theme .placeholder-content p { color: var(--gray); } body.dark-theme .placeholder-content .error-message { background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); color: var(--text-color); } body.dark-theme .settings-label, body.dark-theme .form-group label { color: var(--text-color); } body.dark-theme .settings-subsection h4 { color: #93c5fd; } body.dark-theme .setting-item-label { color: var(--text-color); } body.dark-theme .setting-item-description { color: var(--gray); } body.dark-theme .theme-option span { color: var(--text-color); } body.dark-theme .qr-code-placeholder { border-color: var(--light-gray); color: var(--gray); } body.dark-theme .danger-zone-item .btn-danger { background-color: #dc2626; } body.dark-theme .danger-zone-item .btn-danger:hover:not(:disabled) { background-color: #b91c1c; } body.dark-theme .danger-zone-item p { color: var(--gray); }
        body.dark-theme .checkbox-group { border-color: var(--light-gray); } body.dark-theme .checkbox-group label { color: var(--text-color); } body.dark-theme .confirm-title { color: var(--text-color); } body.dark-theme .confirm-message { color: var(--gray); } body.dark-theme .modal-title { color: #93c5fd; } body.dark-theme .team-member-card .member-name { color: var(--text-color); } body.dark-theme .team-member-card .member-email { color: var(--gray); } body.dark-theme .search-result-item strong { color: var(--text-color); } body.dark-theme .user-name { color: var(--text-color); }
        .theme-options-container { display: flex; gap: 1rem; margin-top: 0.5rem; flex-wrap: wrap; } .theme-option { display: flex; flex-direction: column; align-items: center; cursor: pointer; } .theme-option .theme-preview { width: 60px; height: 40px; border: 2px solid var(--light-gray); border-radius: 6px; transition: border-color 0.2s; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; } .theme-option .theme-label { text-align: center; display: block; margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-color); } .theme-option:hover .theme-preview { border-color: var(--primary); } .theme-option.selected .theme-preview { border-color: var(--primary); border-width: 3px; } .theme-preview.light-preview { background-color: #f8fafc; color: #1e293b; } .theme-preview.dark-preview { background-color: #0f172a; color: #e2e8f0; } .theme-preview.system-preview { background: linear-gradient(45deg, #f8fafc 50%, #0f172a 50%); color: var(--gray); }
        .two-fa-status { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; } .two-fa-status .status-indicator { width: 10px; height: 10px; border-radius: 50%; } .two-fa-status .status-indicator.enabled { background-color: var(--success); } .two-fa-status .status-indicator.disabled { background-color: var(--danger); } .two-fa-setup { border: 1px dashed var(--light-gray); padding: 1.5rem; border-radius: 6px; margin-top: 1rem; background-color: var(--light); } .qr-code-placeholder { width: 150px; height: 150px; border: 2px dashed var(--light-gray); display: flex; align-items: center; justify-content: center; text-align: center; color: var(--gray); font-size: 0.9rem; margin: 1rem auto; } .two-fa-actions { display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; flex-wrap: wrap; }
         .danger-zone-item { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border: 1px solid var(--danger); background-color: rgba(239, 68, 68, 0.05); border-radius: 8px; margin-bottom: 1rem; flex-wrap: wrap; } .danger-zone-item div { max-width: 100%; flex-grow: 1; margin-right: 1rem; } @media (min-width: 768px) { .danger-zone-item div { max-width: 70%; } } .danger-zone-item h5 { color: var(--danger); margin-bottom: 0.25rem; } .danger-zone-item p { color: var(--gray); font-size: 0.9rem; } .danger-zone-item .btn { flex-shrink: 0; margin-top: 0.5rem; }
        .notifications-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; display: none; justify-content: flex-end; } .notifications-modal.active { display: flex; } .notifications-container { width: 400px; max-width: 100%; background-color: var(--white); height: 100vh; overflow-y: auto; animation: slideIn 0.3s ease-out; box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; } @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } } .notifications-header { padding: 1.5rem; border-bottom: 1px solid var(--light-gray); display: flex; justify-content: space-between; align-items: center; background-color: var(--primary); color: white; flex-shrink: 0; } .notifications-title { font-size: 1.25rem; font-weight: 600; } .close-notifications { background: none; border: none; font-size: 1.25rem; cursor: pointer; color: white; } .notifications-body { flex-grow: 1; overflow-y: auto; } .notification-list-item { padding: 1rem 1.5rem; border-bottom: 1px solid var(--light-gray); transition: background-color 0.2s; display: flex; gap: 1rem; align-items: flex-start; cursor: pointer; position: relative; } .notification-list-item:hover { background-color: var(--light); } .notification-list-item.unread { background-color: rgba(37, 99, 235, 0.08); font-weight: 500; } body.dark-theme .notification-list-item.unread { background-color: rgba(59, 130, 246, 0.15); } .notification-list-item:last-child { border-bottom: none; } .notification-icon-wrapper { width: 40px; height: 40px; border-radius: 50%; background-color: rgba(37, 99, 235, 0.1); color: var(--primary); display: flex; align-items: center; justify-content: center; flex-shrink: 0; } body.dark-theme .notification-icon-wrapper { background-color: rgba(59, 130, 246, 0.1); color: #60a5fa;} .notification-content { flex: 1; min-width: 0; } .notification-message { margin-bottom: 0.25rem; color: var(--text-color); line-height: 1.4; } .notification-time { font-size: 0.8rem; color: var(--gray); } .delete-notification { color: var(--danger); cursor: pointer; opacity: 0; transition: opacity 0.2s; position: absolute; top: 0.75rem; right: 0.75rem; padding: 0.25rem; background: var(--white); border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; } .notification-list-item:hover .delete-notification { opacity: 0.6; } .delete-notification:hover { opacity: 1; background: rgba(239, 68, 68, 0.1); } body.dark-theme .delete-notification { background: var(--light); } body.dark-theme .delete-notification:hover { background: rgba(239, 68, 68, 0.2); } .no-notifications-message { text-align: center; padding: 2rem; color: var(--gray); } .notifications-footer { padding: 1rem 1.5rem; border-top: 1px solid var(--light-gray); display: flex; justify-content: space-between; flex-shrink: 0; background-color: var(--light); flex-wrap: wrap; gap: 0.5rem; }
        .confirm-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 1100; display: none; justify-content: center; align-items: center; backdrop-filter: blur(3px); } .confirm-modal.active { display: flex; } .confirm-container { background-color: var(--white); border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); width: 400px; max-width: 90%; padding: 2rem; animation: fadeInScale 0.3s ease-out; } @keyframes fadeInScale { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } } .confirm-title { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-color); } .confirm-message { margin-bottom: 1.5rem; line-height: 1.5; color: var(--gray); } .confirm-actions { display: flex; justify-content: flex-end; gap: 1rem; }
        .success-message { position: fixed; top: 20px; right: 20px; background-color: var(--success); color: white; padding: 1rem 1.5rem; border-radius: 6px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); display: flex; align-items: center; gap: 0.75rem; z-index: 1200; transform: translateX(120%); transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); } .success-message.show { transform: translateX(0); } .success-message i { font-size: 1.25rem; }
        .back-button { display: inline-flex; align-items: center; gap: 0.75rem; color: var(--primary); font-weight: 500; cursor: pointer; margin-bottom: 1.5rem; padding: 0.6rem 1.2rem; border-radius: 6px; transition: background-color 0.2s, border-color 0.2s, color 0.2s; border: 1px solid transparent; font-size: 0.9rem; } .back-button:hover { background-color: var(--primary-light); border-color: var(--primary); color: var(--primary-dark); } .back-button i { transition: transform 0.2s; font-size: 0.8rem; } .back-button:hover i { transform: translateX(-3px); }
        #notificationSound { display: none; } .d-none { display: none !important; } .placeholder-content { text-align: center; padding: 4rem 2rem; color: var(--gray); border: 2px dashed var(--light-gray); border-radius: 8px; margin-top: 2rem; min-height: 300px; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: border-color 0.3s, color 0.3s; } .placeholder-content h2 { color: var(--text-color); margin-bottom: 1rem; } .placeholder-content p { color: var(--gray); } .placeholder-content .loading-indicator { font-size: 1.2rem; margin-top: 1rem; } .placeholder-content .error-message { color: var(--danger); font-weight: 500; margin-top: 1rem; white-space: pre-wrap; text-align: left; padding: 1rem; background: rgba(239, 68, 68, 0.05); border: 1px solid rgba(239, 68, 68, 0.2); border-radius: 4px; max-width: 100%; overflow-wrap: break-word; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 1050; justify-content: center; align-items: center; padding: 20px; } .modal.active { display: flex; } .modal-content { background-color: var(--white); width: 100%; max-width: 500px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); padding: 2rem; max-height: 90vh; overflow-y: auto; animation: zoomIn 0.3s ease-out; color: var(--text-color); } .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--light-gray); } .modal-title { font-size: 1.25rem; font-weight: 600; color: var(--primary-dark); } body.dark-theme .modal-title { color: #93c5fd; } .close-modal { background: none; border: none; font-size: 1.8rem; cursor: pointer; color: var(--gray); line-height: 1;} .close-modal:hover { color: var(--danger); } @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: var(--dark); color: var(--white); padding: 1rem 1.5rem; border-radius: 6px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 1300; opacity: 0; transition: opacity 0.3s, bottom 0.3s; font-size: 0.9rem; } .toast.show { opacity: 1; bottom: 30px; } .toast.success { background-color: var(--success); } .toast.error { background-color: var(--danger); } body.dark-theme .toast { background-color: var(--light); color: var(--text-color); } body.dark-theme .toast.success { background-color: var(--success); color: white; } body.dark-theme .toast.error { background-color: var(--danger); color: white; }
        @media (max-width: 992px) { .sidebar { transform: translateX(-100%); width: 250px; box-shadow: none; } .sidebar.active { transform: translateX(0); box-shadow: 2px 0 10px rgba(0,0,0,0.1); } .main-content { margin-left: 0; } .search-bar { width: 250px; } .team-member-card { flex-wrap: wrap; } .main-content.sidebar-active { margin-left: 250px; } .sidebar-toggle { display: block; position: fixed; top: 15px; left: 15px; z-index: 101; background: var(--primary); color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 4px; font-size: 1.2rem; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); } .top-nav { padding-left: 60px; } }
        @media (min-width: 993px) { .sidebar-toggle { display: none; } }
        @media (max-width: 768px) { .top-nav { flex-direction: column; gap: 1rem; padding: 1rem; padding-left: 1rem; } .search-bar { width: 100%; order: 2; } .user-menu { width: 100%; justify-content: space-between; order: 1; } .content-area { padding: 1.5rem; } .data-form { grid-template-columns: 1fr; } .form-actions { grid-column: span 1; } .user-info { flex-direction: column; text-align: center; } .user-info-avatar { margin-bottom: 1rem; } .stats-section { grid-template-columns: 1fr; } .settings-tabs { flex-wrap: nowrap; overflow-x: auto; } .settings-tab { padding: 0.5rem 1rem; flex-shrink: 0; } .confirm-container { width: 90%; } .team-member-card { flex-direction: column; align-items: flex-start; gap: 0.5rem; } .member-role { margin: 0.5rem 0; } .member-actions { margin-top: 0.5rem; } .profile-avatar-section { margin-bottom: 1.5rem; } #profileAvatarLarge { width: 100px; height: 100px; font-size: 2.5rem; } .add-member-form .data-form { grid-template-columns: 1fr; align-items: stretch; } .add-member-form .data-form > div { margin-bottom: 1rem; } .add-member-form .data-form > div:last-child { margin-top: 0; } .modal-content { width: 95%; padding: 1.5rem;} .notifications-container { width: 100%; max-width: 100%; } .sidebar-toggle { top: 10px; left: 10px; } .top-nav { padding-top: 60px; } }
        @media (max-width: 480px) { .section-header > div { justify-content: center; width: 100%; } .welcome-section { padding: 1.5rem; } .stats-section { gap: 0.75rem; } .stat-card { padding: 1rem; } .user-menu { gap: 1rem; } .user-name { display: none; } .user-status { margin-left: 0; } .notifications-footer { flex-direction: column; gap: 0.5rem; } .notifications-footer .btn { width: 100%; justify-content: center; } }
        .checkbox-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.75rem; margin-top: 0.5rem; padding: 0.5rem; border: 1px solid var(--light-gray); border-radius: 6px; } .checkbox-group label { display: flex; align-items: center; gap: 0.5rem; font-weight: normal; font-size: 0.9rem; margin-bottom: 0; color: var(--text-color); } .checkbox-group input[type="checkbox"] { width: auto; margin-right: 0.25rem; } .settings-link { color: var(--primary); text-decoration: none; cursor: pointer; } .settings-link:hover { text-decoration: underline; color: var(--primary-dark); }
        .close-sidebar { display: none; background: none; border: none; color: white; font-size: 1.2rem; position: absolute; top: 1.5rem; right: 1rem; cursor: pointer; }
         @media (max-width: 992px) { .sidebar.active .close-sidebar { display: block; } }
         .main-content.sidebar-active { margin-left: var(--sidebar-width); } @media (max-width: 992px) { .main-content.sidebar-active { margin-left: 250px; } }
         /* Loading spinner inside buttons */
         .btn span.spinner { width: 16px; height: 16px; border-width: 2px; margin-left: 0.5rem; }
         .btn-outline span.spinner { border-color: rgba(37, 99, 235, 0.3); border-top-color: var(--primary); }

        /* Dark Theme Employee Scheduling Specifics (If needed beyond employee-scheduling.css) */
        body.dark-theme #employeeSchedulingContent .schedule-page-title { color: #93c5fd; }
        body.dark-theme #employeeSchedulingContent .schedule-controls { background-color: var(--light); border: 1px solid var(--light-gray); }
        body.dark-theme #employeeSchedulingContent #weekDisplay { background-color: var(--primary-light); color: var(--text-color); }
        /* ... other dark theme overrides for schedule if employee-scheduling.css doesn't cover all */
    </style>
</head>
<body class=""> <!-- Theme class added by JS -->

    <!-- ... (Audio, Toast, Success Message Elements) ... -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle Sidebar"><i class="fas fa-bars"></i></button>
    <aside class="sidebar" id="sidebar">
        <!-- ... (Sidebar HTML Content) ... -->
    </aside>

    <main class="main-content" id="mainContent">
        <!-- Top Nav HTML Content -->
        <nav class="top-nav">
             <div class="search-bar"> <i class="fas fa-search search-icon"></i> <input type="text" placeholder="Search..." id="searchInput" autocomplete="off"> <div class="search-results" id="searchResults"></div> </div>
             <div class="user-menu"> <div class="notification-icon" id="notificationIcon"> <i class="fas fa-bell"></i> <span class="notification-badge" id="notificationBadge" style="display: none;">0</span> </div> <div class="user-profile" id="userProfileContainer"> <div class="user-avatar" id="userAvatar">U</div> <div class="user-profile-details"> <span class="user-name" id="userName">User</span> <span class="user-status"> • Connected</span> </div> <div class="user-dropdown" id="userDropdown"> <a href="#profile" class="dropdown-item" data-feature="profile"><i class="fas fa-user"></i><span>Profile</span></a> <a href="#settings" class="dropdown-item" data-feature="settings"><i class="fas fa-cog"></i><span>Settings</span></a> <a href="#" class="dropdown-item" id="logoutLink"><i class="fas fa-sign-out-alt"></i><span>Logout</span></a> </div> </div> </div>
        </nav>
        <!-- Content Area -->
        <div class="content-area">
            <div class="back-button" id="backButton" style="display: none;"> <i class="fas fa-arrow-left"></i> <span id="backButtonText">Back</span> </div>

            <!-- STATIC Dashboard Section -->
            <div id="dashboardContent" class="content-section active">
                 <div class="welcome-section" id="welcomeSection"> <h2 class="welcome-title">Welcome, <span id="welcomeName">User</span>!</h2> <p class="welcome-subtitle">Overview of your team activities.</p> <div class="user-info"> <div class="user-info-avatar" id="profileAvatar">U</div> <div class="user-info-details"> <div class="user-info-name" id="userInfoName">Loading...</div> <div class="user-info-title" id="userInfoRoleTitle">Loading...</div> <div class="user-info-email"> <i class="fas fa-envelope"></i> <span id="userEmail">loading...</span> </div> </div> </div> </div>
                 <div class="stats-section" id="statsSection"> <!-- Populated by JS --> </div>
                 <div class="activity-section"> <div class="section-header"> <h3 class="section-title">Recent Activity <span class="live-badge">LIVE</span></h3> <div> <span class="view-all" id="viewAllActivity" style="display: none;">Show All</span> <span class="delete-all" id="deleteAllActivity" style="display: none;">Delete All</span> </div> </div> <ul class="activity-list" id="activityList"> <!-- Populated by JS --> </ul> </div>
            </div>

            <!-- STATIC Profile Section -->
            <div id="profileContent" class="content-section">
                 <div class="section-main-header"> <h2 class="section-main-title">Profile</h2> </div>
                 <p class="profile-header-text">Manage your personal information and avatar.</p>
                 <div class="profile-avatar-section"> <label class="settings-label">Avatar</label> <div id="profileAvatarLarge" title="Click to upload photo">U</div> <input type="file" id="profileAvatarInput" accept="image/*" style="display: none;"> </div>
                 <form class="data-form" id="profileForm"> <div class="form-group"> <label for="firstName">First Name</label> <input type="text" id="firstName" class="form-control"> </div> <div class="form-group"> <label for="lastName">Last Name</label> <input type="text" id="lastName" class="form-control"> </div> <div class="form-group" style="grid-column: span 2;"> <label for="fullNameDisplay">Full Name</label> <input type="text" id="fullNameDisplay" class="form-control" readonly> </div> <div class="form-group"> <label for="jobTitle">Job Title</label> <input type="text" id="jobTitle" class="form-control"> </div> <div class="form-group"> <label for="email">Email</label> <input type="email" id="email" class="form-control" readonly> </div> <div class="form-group"> <label for="phone">Phone Number</label> <input type="tel" id="phone" class="form-control"> </div> <div class="form-group"> <label for="department">Department</label> <input type="text" id="department" class="form-control"> </div> <div class="form-actions"> <button type="button" class="btn btn-outline" id="cancelProfileBtn">Cancel</button> <button type="submit" class="btn btn-primary" id="saveProfileBtn"> <span class="btn-text">Save Changes</span> <span class="spinner" style="display: none;"></span> </button> </div> </form>
            </div>

             <!-- STATIC Settings Section Structure -->
            <div id="settingsContent" class="content-section">
                 <div class="section-main-header"> <h2 class="section-main-title">System Settings</h2> </div>
                 <div class="settings-tabs"> <div class="settings-tab active" data-tab="preferences">Preferences</div> <div class="settings-tab" data-tab="account">Account</div> <div class="settings-tab" data-tab="security">Security</div> <div class="settings-tab" data-tab="notifications">Notifications</div> <div class="settings-tab" data-tab="team" id="teamSettingsTab">Team Management</div> <div class="settings-tab" data-tab="collaboration">Collaboration</div> <div class="settings-tab" data-tab="danger" id="dangerZoneTab">Danger Zone</div> </div>
                 <!-- Settings Panels (Content populated by JS initializer) -->
                 <div class="settings-panel active" id="preferencesPanel"> <p>Loading Preferences...</p> </div>
                 <div class="settings-panel" id="accountPanel"> <p>Loading Account Settings...</p> </div>
                 <div class="settings-panel" id="securityPanel"> <p>Loading Security Settings...</p> </div>
                 <div class="settings-panel" id="notificationsPanel"> <p>Loading Notifications Settings...</p> </div>
                 <div class="settings-panel" id="teamPanel"> <p>Loading Team Management...</p> </div>
                 <div class="settings-panel" id="collaborationPanel"> <p>Loading Collaboration Settings...</p> </div>
                 <div class="settings-panel" id="dangerPanel"> <p>Loading Danger Zone...</p> </div>
            </div>

            <!-- === EMBEDDED Employee Scheduling Section === -->
            <div id="employeeSchedulingContent" class="content-section feature-section">
                 <div class="employee-schedule-section">
                     <div class="schedule-page-header section-main-header"> <h2 class="schedule-page-title section-main-title">Employee Scheduling</h2> <button class="btn btn-primary" id="saveScheduleBtn" style="display: none;"> <i class="fas fa-save"></i> Save </button> </div>
                     <div class="schedule-controls"> <button class="btn btn-outline" id="prevWeekBtn"><i class="fas fa-chevron-left"></i> Prev</button> <span id="weekDisplay">Loading...</span> <button class="btn btn-outline" id="nextWeekBtn">Next <i class="fas fa-chevron-right"></i></button> <button class="btn btn-success" id="sendRemindersBtn" style="margin-left: auto; display: none;"> <i class="fas fa-envelope"></i> Reminders </button> <button class="btn btn-secondary" id="addNewEmployeeBtn_schedule" style="display: none;"> <i class="fas fa-user-plus"></i> Add Emp </button> </div>
                     <div class="schedule-container"> <table class="schedule-table"> <thead> <tr> <th>Employee</th> </tr> </thead> <tbody id="scheduleTableBody"> <tr><td colspan="8">Loading...</td></tr> </tbody> </table> </div>
                     <div class="modal" id="editShiftModal"> <div class="modal-content"> <div class="modal-header"> <h3 class="modal-title" id="editShiftModalTitle">Edit Shift</h3> <button class="close-modal" data-close-modal>×</button> </div> <form id="editShiftForm"> <input type="hidden" id="editShiftEmployeeId"> <input type="hidden" id="editShiftDayIndex"> <input type="hidden" id="editShiftWeekOffset"> <div class="form-group"> <label for="shiftEmployeeNameDisplay">Employee</label> <input type="text" id="shiftEmployeeNameDisplay" class="form-control" readonly> </div> <div class="form-group"> <label for="shiftTypeSelect">Shift Type</label> <select id="shiftTypeSelect" class="form-control"> <option value="morning">Morning</option> <option value="afternoon">Afternoon</option> <option value="night">Night</option> <option value="off">Day Off</option> <option value="sick">Sick Leave</option> <option value="vacation">Vacation</option> </select> </div> <div class="form-actions"> <button type="button" class="btn btn-danger" id="deleteShiftBtn_modal" style="margin-right: auto;">Delete</button> <button type="button" class="btn btn-outline" data-close-modal>Cancel</button> <button type="submit" class="btn btn-primary">Save</button> </div> </form> </div> </div>
                 </div>
            </div>

            <!-- === Other Embedded Feature Sections (Placeholders) === -->
            <div id="projectsContent" class="content-section feature-section"><h2>Projects</h2><p>Placeholder content.</p></div>
            <div id="reportsAnalyticsContent" class="content-section feature-section"><h2>Reports</h2><p>Placeholder content.</p></div>
            <div id="teamMembersViewContent" class="content-section feature-section"><h2>Team Members View</h2><p>Placeholder content.</p></div>
            <div id="fileSharingContent" class="content-section feature-section"><h2>File Sharing</h2><p>Placeholder content.</p></div>
            <div id="dataManagementContent" class="content-section feature-section"><h2>Data Management</h2><p>Placeholder content.</p></div>
            <div id="projectTrackingContent" class="content-section feature-section"><h2>Project Tracking</h2><p>Placeholder content.</p></div>
            <div id="taskManagementContent" class="content-section feature-section"><h2>Task Management</h2><p>Placeholder content.</p></div>
            <div id="teamCalendarContent" class="content-section feature-section"><h2>Team Calendar</h2><p>Placeholder content.</p></div>
            <div id="deadlineTrackingContent" class="content-section feature-section"><h2>Deadline Tracking</h2><p>Placeholder content.</p></div>
            <div id="innovationHubContent" class="content-section feature-section"><h2>Innovation Hub</h2><p>Placeholder content.</p></div>

        </div> <!-- End .content-area -->
    </main>

    <!-- Modals -->
    <div class="notifications-modal" id="notificationsModal"> <!-- Structure with placeholders -->
        <div class="notifications-container"> <div class="notifications-header"> <h3 class="notifications-title">Notifications</h3> <button class="close-notifications" id="closeNotifications" aria-label="Close Notifications">×</button> </div> <div class="notifications-body" id="notificationsBody"> <div class="no-notifications-message" id="noNotificationsMessage">Loading...</div> </div> <div class="notifications-footer"> <button class="btn btn-outline btn-sm" id="markAllReadBtn">Mark All Read</button> <button class="btn btn-danger btn-sm" id="deleteAllNotificationsBtn">Delete All</button> </div> </div>
    </div>
    <div class="confirm-modal" id="confirmModal"> <!-- Structure -->
         <div class="confirm-container"> <h3 class="confirm-title" id="confirmTitle">Confirm</h3> <div class="confirm-message" id="confirmMessage">Are you sure?</div> <div class="confirm-actions"> <button class="btn btn-outline" id="cancelConfirmBtn">Cancel</button> <button class="btn btn-danger" id="confirmBtn">Confirm</button> </div> </div>
    </div>
    <div class="modal" id="editMemberModal"> <!-- Structure populated by JS -->
        <div class="modal-content"> <div class="modal-header"> <h3 class="modal-title" id="editMemberModalTitle">Edit Member</h3> <button class="close-modal" data-close-modal>&times;</button> </div> <form id="editMemberForm"> <input type="hidden" id="editMemberId"> <div class="data-form" style="grid-template-columns: 1fr 1fr;"> <div class="form-group"> <label for="editMemberFirstName">First Name</label> <input type="text" id="editMemberFirstName" class="form-control"> </div> <div class="form-group"> <label for="editMemberLastName">Last Name</label> <input type="text" id="editMemberLastName" class="form-control"> </div> <div class="form-group"> <label for="editMemberEmail">Email</label> <input type="email" id="editMemberEmail" class="form-control" readonly> </div> <div class="form-group"> <label for="editMemberRole">Role</label> <select id="editMemberRole" class="form-control"> <option value="member">Member</option> <option value="supervisor">Supervisor</option> <option value="senior">Senior</option> <option value="admin">Admin</option> </select> </div> <div class="form-group"> <label for="editMemberTitle">Job Title</label> <input type="text" id="editMemberTitle" class="form-control"> </div> <div class="form-group"> <label for="editMemberDepartment">Department</label> <input type="text" id="editMemberDepartment" class="form-control"> </div> </div> <div class="form-actions" style="grid-column: span 1;"> <button type="button" class="btn btn-outline" data-close-modal>Cancel</button> <button type="submit" class="btn btn-primary">Save Changes</button> </div> </form> </div>
    </div>

    <script>
        // ==========================================
        //          DASHBOARD CORE SCRIPT
        // ==========================================
        document.addEventListener('DOMContentLoaded', function() {

            // --- DOM References ---
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const closeSidebar = document.getElementById('closeSidebar');
            const mainContent = document.getElementById('mainContent');
            const navLinks = document.querySelectorAll('.menu-item, .dropdown-item[data-feature]');
            const allContentSections = document.querySelectorAll('.content-area > .content-section');
            const backButton = document.getElementById('backButton');
            const userProfileContainer = document.getElementById('userProfileContainer');
            const userDropdown = document.getElementById('userDropdown');
            const logoutLink = document.getElementById('logoutLink');
            const toastMessage = document.getElementById('toastMessage');
            const confirmModal = document.getElementById('confirmModal');
            const confirmTitle = document.getElementById('confirmTitle');
            const confirmMessage = document.getElementById('confirmMessage');
            const cancelConfirmBtn = document.getElementById('cancelConfirmBtn');
            const confirmBtn = document.getElementById('confirmBtn');
            const notificationSound = document.getElementById('notificationSound');
            const welcomeNameEl = document.getElementById('welcomeName');
            const userInfoNameEl = document.getElementById('userInfoName');
            const userInfoRoleTitleEl = document.getElementById('userInfoRoleTitle');
            const userEmailEl = document.getElementById('userEmail');
            const userAvatarEl = document.getElementById('userAvatar');
            const profileAvatarWelcomeEl = document.getElementById('profileAvatar');
            const statsSection = document.getElementById('statsSection');
            const activityList = document.getElementById('activityList');
            const viewAllActivity = document.getElementById('viewAllActivity');
            const deleteAllActivity = document.getElementById('deleteAllActivity');
            const notificationIcon = document.getElementById('notificationIcon');
            const notificationBadge = document.getElementById('notificationBadge');
            const notificationsModal = document.getElementById('notificationsModal');
            const closeNotifications = document.getElementById('closeNotifications');
            const notificationsBody = document.getElementById('notificationsBody');
            const noNotificationsMessage = document.getElementById('noNotificationsMessage');
            const markAllReadBtn = document.getElementById('markAllReadBtn');
            const deleteAllNotificationsBtn = document.getElementById('deleteAllNotificationsBtn');
            const profileForm = document.getElementById('profileForm');
            const profileAvatarLarge = document.getElementById('profileAvatarLarge');
            const profileAvatarInput = document.getElementById('profileAvatarInput');
            const saveProfileBtn = document.getElementById('saveProfileBtn');
            const cancelProfileBtn = document.getElementById('cancelProfileBtn');
            const settingsContent = document.getElementById('settingsContent'); // Needed for delegation
            const editMemberModal = document.getElementById('editMemberModal');
            const editMemberForm = document.getElementById('editMemberForm');


            // --- State Variables ---
            let currentUser = null;
            let teamMembers = [];
            let currentFeature = 'dashboard';
            let currentSettingsTab = 'preferences';
            let confirmCallback = null;
            let showToasts = true;
            let playSounds = true;
            let featureInitialized = { // Track initialization state for each section
                dashboard: false,
                profile: false,
                settings: false, // Tracks if settings *panels* have been initialized
                employeeScheduling: false,
                // Add other feature IDs here as they are implemented
                projects: false,
                reportsAnalytics: false,
                teamMembersView: false,
                fileSharing: false,
                dataManagement: false,
                projectTracking: false,
                taskManagement: false,
                teamCalendar: false,
                deadlineTracking: false,
                innovationHub: false
            };
            let activities = []; // Store activities data
            let notifications = []; // Store notifications data
            let showingAllActivities = false; // Track activity list state
            let activityUpdateIntervalId = null; // Interval for relative time update
            let mockScheduleData = {}; // Holds schedule shifts {'empId-offset-dayIndex': 'type'}


            // --- Mock Data ---
             const MOCK_USERS_DATA = [ { id: 1, name: 'Mohamed Elmenisy', email: 'm.elsayed@thechefz.co', title: 'Administrator', department: 'Management', phone: '+201234567890', avatar: '', initials: 'ME', role: 'admin', twoFaEnabled: false }, { id: 2, name: 'Yousef Ahmed', email: 'yousef@example.com', title: 'Supervisor', department: 'Operations', phone: '+20111222333', avatar: '', initials: 'YA', role: 'supervisor', twoFaEnabled: false }, { id: 3, name: 'Esraa Lashin', email: 'esraa@example.com', title: 'Senior Developer', department: 'Engineering', phone: '+20100999888', avatar: '', initials: 'EL', role: 'senior', twoFaEnabled: true }, { id: 4, name: 'Bassant Badr', email: 'bassant@example.com', title: 'Junior Designer', department: 'Design', phone: '+20155444333', avatar: '', initials: 'BB', role: 'member', twoFaEnabled: false }, { id: 5, name: 'Nada Mahmoud', email: 'nada@example.com', title: 'Member', department: 'Marketing', phone: '+20101234567', avatar: '', initials: 'NM', role: 'member', twoFaEnabled: false }, ];

            // --- Initialization ---
            function initDashboard() {
                currentUser = MOCK_USERS_DATA.find(u => u.role === 'admin') || MOCK_USERS_DATA[0];
                teamMembers = MOCK_USERS_DATA;
                if (!currentUser) { console.error("Fatal: No user found."); return; }

                applyStoredPreferences();
                updateUserUI();
                setupEventListeners();
                handleInitialNavigation(); // Activate section based on URL hash or default
                setupResponsiveSidebar();
                startActivityTimeUpdater(); // Start relative time updates
            }

            // --- UI Update & Preferences ---
            function updateUserUI() {
                 if (!currentUser) return;
                 const name = currentUser.name || 'User';
                 const initials = currentUser.initials || name.charAt(0) || '?';
                 const avatarUrl = currentUser.avatar;

                 // Top Nav
                 document.getElementById('userName').textContent = name;
                 userAvatarEl.textContent = initials;
                 if (avatarUrl) { userAvatarEl.style.backgroundImage = `url(${avatarUrl})`; userAvatarEl.textContent = ''; }
                 else { userAvatarEl.style.backgroundImage = 'none'; }

                 // Welcome Section
                 if (welcomeNameEl) welcomeNameEl.textContent = name.split(' ')[0];
                 if (userInfoNameEl) userInfoNameEl.textContent = name;
                 if (userEmailEl) userEmailEl.textContent = currentUser.email || 'No Email';
                 if (userInfoRoleTitleEl) {
                     userInfoRoleTitleEl.textContent = capitalizeFirstLetter(currentUser.role || 'Member');
                     userInfoRoleTitleEl.className = `user-info-title role-${currentUser.role || 'member'}`;
                 }
                 if (profileAvatarWelcomeEl) {
                    profileAvatarWelcomeEl.textContent = initials;
                    if (avatarUrl) { profileAvatarWelcomeEl.style.backgroundImage = `url(${avatarUrl})`; profileAvatarWelcomeEl.textContent = ''; }
                    else { profileAvatarWelcomeEl.style.backgroundImage = 'none'; }
                 }
                 applyRBAC(); // Apply role-based visibility
            }

             function updateProfileFormUI() {
                 // Only update if profile section exists
                 if (!profileForm || !currentUser) return;
                 const nameParts = currentUser.name.split(' ');
                 document.getElementById('firstName').value = nameParts[0] || '';
                 document.getElementById('lastName').value = nameParts.slice(1).join(' ') || '';
                 document.getElementById('fullNameDisplay').value = currentUser.name;
                 document.getElementById('jobTitle').value = currentUser.title || '';
                 document.getElementById('email').value = currentUser.email || '';
                 document.getElementById('phone').value = currentUser.phone || '';
                 document.getElementById('department').value = currentUser.department || '';
                 if (profileAvatarLarge) {
                     profileAvatarLarge.textContent = currentUser.initials || '?';
                     if (currentUser.avatar) {
                         profileAvatarLarge.style.backgroundImage = `url(${currentUser.avatar})`;
                         profileAvatarLarge.textContent = '';
                     } else {
                         profileAvatarLarge.style.backgroundImage = 'none';
                     }
                 }
             }


             function applyStoredPreferences() {
                 const storedTheme = localStorage.getItem('theme') || 'system';
                 setTheme(storedTheme);
                 const storedContrast = localStorage.getItem('highContrast') === 'true';
                 setContrast(storedContrast);
                 playSounds = (localStorage.getItem('playSounds') ?? 'true') === 'true';
                 showToasts = (localStorage.getItem('showToasts') ?? 'true') === 'true';

                 // Update toggles in settings panel (if already initialized)
                  if (featureInitialized.settings) {
                     document.getElementById('highContrastToggle').checked = storedContrast;
                     document.getElementById('soundToggle').checked = playSounds;
                     document.getElementById('toastToggle').checked = showToasts;
                     document.getElementById('languageSelect').value = localStorage.getItem('language') || 'en';
                     document.getElementById('regionSelect').value = localStorage.getItem('region') || 'utc';
                     document.getElementById('timeFormatSelect').value = localStorage.getItem('timeFormat') || '12h';
                     document.getElementById('dateFormatSelect').value = localStorage.getItem('dateFormat') || 'MM/DD/YYYY';
                 }
             }

            function setTheme(theme) {
                 document.body.className = ''; // Clear previous
                 let finalTheme = theme;
                 if (theme === 'system') {
                     const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                     finalTheme = prefersDark ? 'dark' : 'light';
                     console.log(`System theme detected: ${finalTheme}`);
                 } else {
                     localStorage.setItem('theme', theme); // Save explicit choice
                 }
                 document.body.classList.add(`${finalTheme}-theme`);
                 // Re-apply contrast if needed
                 if (localStorage.getItem('highContrast') === 'true') {
                     document.body.classList.add('high-contrast');
                 }
                  // Update UI selector
                 document.querySelectorAll('.theme-option').forEach(opt => {
                     opt.classList.toggle('selected', opt.dataset.theme === theme);
                 });
             }

             function setContrast(enabled) {
                 document.body.classList.toggle('high-contrast', enabled);
                 localStorage.setItem('highContrast', enabled);
             }
             function applyLanguage(lang) { /* ... (Simulation) ... */ localStorage.setItem('language', lang); }
             function applyDateTimeFormat(timeF, dateF) { localStorage.setItem('timeFormat', timeF); localStorage.setItem('dateFormat', dateF); updateActivityTimes(); /* Refresh displayed times */ }
             function applyToastPreference(enabled) { showToasts = enabled; localStorage.setItem('showToasts', enabled); }
             function applySoundPreference(enabled) { playSounds = enabled; localStorage.setItem('playSounds', enabled); }

            // --- Navigation & Content Activation ---
            function setActiveFeature(featureId, settingsTab = null, skipHistory = false) {
                 console.log(`Navigating to: ${featureId} ${settingsTab ? '/ '+settingsTab : ''}`);

                 // --- RBAC ---
                  const requiresAdmin = ['danger', 'team']; // Settings tabs requiring admin/supervisor
                  const requiresSupervisor = ['employeeScheduling']; // Features requiring supervisor+
                  if (featureId === 'settings' && requiresAdmin.includes(settingsTab) && currentUser.role !== 'admin') {
                      showToast("Access Denied.", "error");
                      setActiveFeature('settings', 'preferences', true); return;
                  }
                   if (requiresSupervisor.includes(featureId) && !['admin', 'supervisor'].includes(currentUser.role)) {
                     showToast("Access Denied.", "error");
                     setActiveFeature('dashboard', null, true); return;
                  }

                 currentFeature = featureId;
                 currentSettingsTab = featureId === 'settings' ? (settingsTab || 'preferences') : null;

                 // Update Menu
                 navLinks.forEach(link => { link.classList.toggle('active', link.getAttribute('data-feature') === featureId); });

                 // Show/Hide Sections
                 let sectionActivated = false;
                 allContentSections.forEach(section => {
                     const sectionId = section.id;
                     const expectedId = `${featureId}Content`;
                     if (sectionId === expectedId) {
                         section.classList.add('active');
                         section.style.display = 'block';
                         sectionActivated = true;
                         console.log(`Activated section: #${sectionId}`);

                         // Call Initializer
                         const initKey = featureId; // Use featureId as key
                         if (!featureInitialized[initKey]) {
                             if (featureId === 'settings') initializeSettingsPanels(); // Init settings structure first
                             const initializer = window[`initialize${capitalizeFirstLetter(toCamelCase(featureId))}`];
                             if (typeof initializer === 'function') {
                                 try { initializer(); featureInitialized[initKey] = true; } catch (e) { console.error(`Error initializing ${featureId}:`, e); }
                             } else if (!['dashboard', 'profile', 'settings'].includes(featureId)) { // Don't warn for static sections
                                 console.warn(`Initializer not found for ${featureId}`);
                             }
                         }
                         // Activate settings tab if needed
                         if (featureId === 'settings') activateSettingsTab(currentSettingsTab);
                         // Update profile form if needed
                         if (featureId === 'profile') updateProfileFormUI();
                          // Load initial dashboard data if activating dashboard
                         if (featureId === 'dashboard' && !featureInitialized.dashboard) {
                            loadInitialDashboardData();
                            featureInitialized.dashboard = true;
                         }

                     } else {
                         section.classList.remove('active');
                         section.style.display = 'none';
                     }
                 });

                 if (!sectionActivated) { console.warn(`Section ${featureId}Content not found.`); setActiveFeature('dashboard', null, true); return; }

                 // Update Back Button
                 if (backButton) { backButton.style.display = featureId !== 'dashboard' ? 'flex' : 'none'; }
                 // Update History
                 if (!skipHistory) { updateBrowserHistory(featureId, currentSettingsTab); }
                 closeMobileSidebar();
            } // End setActiveFeature

             function activateSettingsTab(tabId) {
                 // Ensure settings panels are initialized first
                 initializeSettingsPanels();

                 if (!document.getElementById(`${tabId}Panel`)) tabId = 'preferences'; // Fallback
                 console.log("Activating settings tab:", tabId);
                 currentSettingsTab = tabId;

                 document.querySelectorAll('.settings-tab').forEach(tab => tab.classList.toggle('active', tab.dataset.tab === tabId));
                 document.querySelectorAll('.settings-panel').forEach(panel => panel.classList.toggle('active', panel.id === `${tabId}Panel`));

                 // Initialize specific panel content if needed
                 const initKey = `settings_${tabId}`;
                 if (!featureInitialized[initKey]) {
                     if (tabId === 'team') loadTeamMembers();
                     else if (tabId === 'security') update2FA_UI();
                     else if (tabId === 'account') document.getElementById('accountEmail').value = currentUser.email;
                     // Initialize others...
                     featureInitialized[initKey] = true;
                 }
                 updateBrowserHistory('settings', tabId); // Update hash for tab change
             }

            function updateBrowserHistory(featureId, settingsTab) { /* ... (Same) ... */
                 let hash = `#${featureId}`; if (featureId === 'settings' && settingsTab) { hash += `-${settingsTab}`; } if (window.location.hash !== hash) { window.history.replaceState({ feature: featureId, tab: settingsTab }, '', hash); }
            }
            function handleInitialNavigation() { /* ... (Same - parse hash, call setActiveFeature) ... */
                 const hash = window.location.hash.substring(1); let featureId = 'dashboard'; let settingsTab = null; if (hash) { if (hash.startsWith('settings-')) { featureId = 'settings'; settingsTab = hash.split('-')[1] || 'preferences'; if (!document.getElementById(`${settingsTab}Panel`)) settingsTab = 'preferences'; } else if (document.getElementById(`${hash}Content`)) { featureId = hash; } } setActiveFeature(featureId, settingsTab, true);
            }
            window.addEventListener('popstate', handleInitialNavigation);

            // --- Component Initializers ---

            // ==================================================
            // == EMPLOYEE SCHEDULING COMPONENT LOGIC =========
            // ==================================================
            function initializeEmployeeScheduling() {
                if (featureInitialized.employeeScheduling) return;
                console.log("Initializing Employee Scheduling Component...");
                const section = document.getElementById('employeeSchedulingContent');
                if (!section) { console.error("Scheduling section not found!"); return; }

                // DOM Elements (Scoped)
                const weekDisplay = section.querySelector('#weekDisplay');
                const scheduleTableBody = section.querySelector('#scheduleTableBody');
                const scheduleThead = section.querySelector('.schedule-table thead tr');
                const prevWeekBtn = section.querySelector('#prevWeekBtn');
                const nextWeekBtn = section.querySelector('#nextWeekBtn');
                const saveScheduleBtn = section.querySelector('#saveScheduleBtn');
                const sendRemindersBtn = section.querySelector('#sendRemindersBtn');
                const addNewEmployeeBtn = section.querySelector('#addNewEmployeeBtn_schedule');
                const editShiftModal = section.querySelector('#editShiftModal');
                const editShiftForm = section.querySelector('#editShiftForm');
                const shiftTypeSelect = section.querySelector('#shiftTypeSelect');
                const editShiftEmployeeIdInput = section.querySelector('#editShiftEmployeeId');
                const editShiftDayIndexInput = section.querySelector('#editShiftDayIndex');
                const editShiftWeekOffsetInput = section.querySelector('#editShiftWeekOffset');
                const editShiftModalTitle = section.querySelector('#editShiftModalTitle');
                const shiftEmployeeNameDisplay = section.querySelector('#shiftEmployeeNameDisplay');
                const deleteShiftBtnModal = section.querySelector('#deleteShiftBtn_modal');

                // Check elements
                if (!weekDisplay || !scheduleTableBody || !scheduleThead || !prevWeekBtn || !nextWeekBtn || !editShiftModal || !editShiftForm || !shiftTypeSelect || !deleteShiftBtnModal) { console.error("Schedule Init Error: Missing essential elements."); return; }

                // State & Data
                let currentScheduleWeekOffset = 0;
                // mockScheduleData defined globally for persistence across loads
                const days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                const fullDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

                // --- Helpers ---
                const getWeekDates = (offset = 0) => { const s = getWeekStartDate(offset); const d = []; for (let i = 0; i < 7; i++) { const dt = new Date(s); dt.setDate(s.getDate() + i); d.push(dt); } return d; };
                const getWeekStartDate = (offset = 0) => { const t = new Date(); const wd = t.getDay(); const d = t.getDate() - wd + (offset * 7); const s = new Date(t); s.setDate(d); s.setHours(0, 0, 0, 0); return s; };
                const formatDate = (d) => { if (!(d instanceof Date)) return ''; return d.toLocaleDateString(undefined, { month: 'short', day: 'numeric' }); };
                const getShiftText = (t) => { switch(t){ case 'morning':return'9A-5P'; case 'afternoon':return'12P-8P'; case 'night':return'8P-4A'; case 'off':return'OFF'; case 'sick':return'Sick'; case 'vacation':return'Vacation'; default:return'N/A';}};

                // --- Rendering ---
                function renderSchedule(weekOffset) {
                    console.log(`Schedule: Render offset ${weekOffset}`);
                    const weekDates = getWeekDates(weekOffset);
                    weekDisplay.textContent = `${formatDate(weekDates[0])} - ${formatDate(weekDates[6])}`;
                    prevWeekBtn.disabled = false; nextWeekBtn.disabled = false; // Add limits later

                    // Header
                    scheduleThead.innerHTML = '<th>Employee</th>';
                    weekDates.forEach((d, i) => { scheduleThead.innerHTML += `<th><div class="day-header"><span class="day-name">${days[i]}</span><span class="day-date">${formatDate(d)}</span></div></th>`; });

                    // Body
                    scheduleTableBody.innerHTML = '';
                    if (!teamMembers || teamMembers.length === 0) { scheduleTableBody.innerHTML = `<tr><td colspan="8">No team members.</td></tr>`; return; }

                    teamMembers.forEach(employee => {
                        const row = scheduleTableBody.insertRow();
                        const nameCell = row.insertCell(); nameCell.className = 'employee-name'; nameCell.textContent = employee.name;
                        for (let dayIndex = 0; dayIndex < 7; dayIndex++) {
                            const cell = row.insertCell();
                            const key = `${employee.id}-${weekOffset}-${dayIndex}`;
                            const isWknd = dayIndex === 5 || dayIndex === 6; // Fri/Sat
                            const canEdit = !isWknd && ['admin', 'supervisor'].includes(currentUser.role);
                            let type = mockScheduleData[key];
                            if (!type) type = isWknd ? 'off' : 'morning';
                            if (isWknd) cell.classList.add('weekend-cell');
                            const shiftDiv = document.createElement('div');
                            shiftDiv.className = `shift ${isWknd ? 'shift-weekend-off' : `shift-${type.replace('_', '-')}`}`;
                            shiftDiv.textContent = getShiftText(type);
                            shiftDiv.title = shiftDiv.textContent;
                            if (canEdit) {
                                shiftDiv.classList.add('editable');
                                shiftDiv.dataset.employeeId = employee.id; shiftDiv.dataset.employeeName = employee.name; shiftDiv.dataset.dayIndex = dayIndex; shiftDiv.dataset.weekOffset = weekOffset; shiftDiv.dataset.date = formatDate(weekDates[dayIndex]); shiftDiv.title = `Edit ${employee.name}'s shift`;
                            }
                            cell.appendChild(shiftDiv);
                        }
                    });
                } // end renderSchedule

                // --- Event Handlers ---
                function handleWeekChange(dir) { currentScheduleWeekOffset += dir; renderSchedule(currentScheduleWeekOffset); }
                function handleSave() { showConfirmModal('Save Schedule', 'Save changes?', () => { console.log("Saving schedule:", mockScheduleData); showToast('Schedule saved (simulated).', 'success'); }); }
                function handleReminders() { console.log("Sending reminders..."); showToast('Reminders sent (simulated).'); }
                function handleAddEmp() { showToast("Navigate to Settings > Team"); setActiveFeature('settings', 'team'); }

                function handleEditClick(event) {
                    const target = event.target.closest('.shift.editable');
                    if (!target) return;
                    const { employeeId, employeeName, dayIndex, weekOffset, date } = target.dataset;
                    const key = `${employeeId}-${weekOffset}-${dayIndex}`;
                    editShiftEmployeeIdInput.value = employeeId; editShiftDayIndexInput.value = dayIndex; editShiftWeekOffsetInput.value = weekOffset;
                    shiftTypeSelect.value = mockScheduleData[key] || 'morning';
                    shiftEmployeeNameDisplay.value = employeeName;
                    editShiftModalTitle.textContent = `Edit: ${employeeName} on ${fullDays[dayIndex]} (${date})`;
                    deleteShiftBtnModal.style.display = ['admin', 'supervisor'].includes(currentUser.role) ? 'inline-flex' : 'none';
                    editShiftModal?.classList.add('active');
                }
                function handleFormSubmit(event) {
                    event.preventDefault();
                    const key = `${editShiftEmployeeIdInput.value}-${editShiftWeekOffsetInput.value}-${editShiftDayIndexInput.value}`;
                    mockScheduleData[key] = shiftTypeSelect.value;
                    renderSchedule(parseInt(editShiftWeekOffsetInput.value));
                    editShiftModal?.classList.remove('active');
                    showToast("Shift updated.", "success");
                }
                 function handleDeleteShift() {
                     showConfirmModal('Delete Shift', `Delete shift for ${shiftEmployeeNameDisplay.value}? (Set to OFF)`, () => {
                        const key = `${editShiftEmployeeIdInput.value}-${editShiftWeekOffsetInput.value}-${editShiftDayIndexInput.value}`;
                        mockScheduleData[key] = 'off';
                        renderSchedule(parseInt(editShiftWeekOffsetInput.value));
                        editShiftModal?.classList.remove('active');
                        showToast("Shift deleted.", "success");
                     }, 'btn-danger');
                 }

                // --- Attach Listeners ---
                prevWeekBtn.addEventListener('click', () => handleWeekChange(-1));
                nextWeekBtn.addEventListener('click', () => handleWeekChange(1));
                if (saveScheduleBtn) saveScheduleBtn.addEventListener('click', handleSave);
                if (sendRemindersBtn) sendRemindersBtn.addEventListener('click', handleReminders);
                if (addNewEmployeeBtn) addNewEmployeeBtn.addEventListener('click', handleAddEmp);
                editShiftForm.addEventListener('submit', handleFormSubmit);
                deleteShiftBtnModal.addEventListener('click', handleDeleteShift);
                scheduleTableBody.addEventListener('click', handleEditClick); // Use delegation
                section.querySelectorAll('[data-close-modal]').forEach(btn => btn.addEventListener('click', () => btn.closest('.modal')?.classList.remove('active')));
                editShiftModal.addEventListener('click', (e) => { if (e.target === editShiftModal) editShiftModal.classList.remove('active'); });

                // --- Initial Render & Visibility ---
                 renderSchedule(currentScheduleWeekOffset);
                 const canManage = ['admin', 'supervisor'].includes(currentUser.role);
                 if (saveScheduleBtn) saveScheduleBtn.style.display = canManage ? 'flex' : 'none';
                 if (sendRemindersBtn) sendRemindersBtn.style.display = canManage ? 'flex' : 'none';
                 if (addNewEmployeeBtn) addNewEmployeeBtn.style.display = canManage ? 'flex' : 'none';

                 console.log("Employee Scheduling Component Initialized.");
                 featureInitialized.employeeScheduling = true; // Mark as initialized
             } // End initializeEmployeeScheduling


            // ==================================================
            // == Settings Panels Initialization & Logic ========
            // ==================================================
             function initializeSettingsPanels() {
                 if (featureInitialized.settings) return;
                 console.log("Initializing Settings Panels Content...");

                 // --- Populate Preferences Panel ---
                 const prefsPanel = document.getElementById('preferencesPanel');
                 if (prefsPanel) {
                     // (Paste Preferences Panel HTML structure here from previous answer)
                     prefsPanel.innerHTML = `... (HTML for Preferences Panel) ...`;
                     // Attach listeners *after* setting innerHTML
                     attachSettingsPanelListeners('preferences');
                 }
                 // --- Populate Account Panel ---
                  const accountPanel = document.getElementById('accountPanel');
                  if (accountPanel) {
                      accountPanel.innerHTML = `... (HTML for Account Panel) ...`;
                      attachSettingsPanelListeners('account');
                  }
                 // --- Populate Security Panel ---
                  const securityPanel = document.getElementById('securityPanel');
                  if (securityPanel) {
                      securityPanel.innerHTML = `... (HTML for Security Panel) ...`;
                      attachSettingsPanelListeners('security');
                  }
                 // --- Populate Notifications Panel ---
                  const notifsPanel = document.getElementById('notificationsPanel');
                  if (notifsPanel) {
                      notifsPanel.innerHTML = `... (HTML for Notifications Panel) ...`;
                      attachSettingsPanelListeners('notifications');
                  }
                 // --- Populate Team Panel ---
                 const teamPanel = document.getElementById('teamPanel');
                 if (teamPanel) {
                     teamPanel.innerHTML = `... (HTML for Team Panel) ...`;
                     attachSettingsPanelListeners('team'); // This will call loadTeamMembers
                 }
                 // --- Populate Collaboration Panel ---
                  const collabPanel = document.getElementById('collaborationPanel');
                  if (collabPanel) {
                      collabPanel.innerHTML = `... (HTML for Collaboration Panel) ...`;
                      // attachSettingsPanelListeners('collaboration'); // If needed
                  }
                 // --- Populate Danger Zone Panel ---
                  const dangerPanel = document.getElementById('dangerPanel');
                  if (dangerPanel) {
                      dangerPanel.innerHTML = `... (HTML for Danger Zone Panel) ...`;
                      attachSettingsPanelListeners('danger');
                  }

                 featureInitialized.settings = true;
                 applyStoredPreferences(); // Apply stored values to the new elements
                 activateSettingsTab(currentSettingsTab); // Ensure correct tab is active
             }

             function attachSettingsPanelListeners(panelType) {
                // Use event delegation where possible, or attach directly after innerHTML set
                 if (panelType === 'preferences') {
                     const panel = document.getElementById('preferencesPanel');
                     if(!panel) return;
                     panel.querySelectorAll('.theme-option').forEach(option => option.addEventListener('click', () => setTheme(option.dataset.theme)));
                     panel.querySelector('#highContrastToggle')?.addEventListener('change', (e) => setContrast(e.target.checked));
                     panel.querySelector('#languageSelect')?.addEventListener('change', (e) => applyLanguage(e.target.value));
                     const applyDateTimeListener = () => applyDateTimeFormat(panel.querySelector('#timeFormatSelect')?.value, panel.querySelector('#dateFormatSelect')?.value);
                     panel.querySelector('#timeFormatSelect')?.addEventListener('change', applyDateTimeListener);
                     panel.querySelector('#dateFormatSelect')?.addEventListener('change', applyDateTimeListener);
                     panel.querySelector('#toastToggle')?.addEventListener('change', (e) => applyToastPreference(e.target.checked));
                     panel.querySelector('#soundToggle')?.addEventListener('change', (e) => applySoundPreference(e.target.checked));
                     panel.querySelector('#savePreferencesBtn')?.addEventListener('click', handleSavePreferences);
                 }
                 else if (panelType === 'account') {
                      const panel = document.getElementById('accountPanel');
                      if(!panel) return;
                      panel.querySelector('#saveAccountSettingsBtn')?.addEventListener('click', handleSaveAccountSettings);
                 }
                 else if (panelType === 'security') {
                      const panel = document.getElementById('securityPanel');
                      if(!panel) return;
                      panel.querySelector('#changePasswordForm')?.addEventListener('submit', handleChangePassword);
                      panel.querySelector('#enable2faBtn')?.addEventListener('click', handleEnable2FA);
                      panel.querySelector('#setupAuthAppBtn')?.addEventListener('click', showAuthAppSetup);
                      panel.querySelector('#setupSmsBtn')?.addEventListener('click', showSmsSetup);
                      panel.querySelector('#verifyAuthCodeBtn')?.addEventListener('click', handleVerifyAuthCode);
                      panel.querySelector('#sendSmsCodeBtn')?.addEventListener('click', handleSendSmsCode);
                      panel.querySelector('#verifySmsCodeBtn')?.addEventListener('click', handleVerifySmsCode);
                      panel.querySelector('#disable2faBtn')?.addEventListener('click', handleDisable2FA);
                      panel.querySelector('#saveSessionSettingsBtn')?.addEventListener('click', handleSaveSessionSettings);
                 }
                 else if (panelType === 'notifications') {
                     const panel = document.getElementById('notificationsPanel');
                     if(!panel) return;
                     panel.querySelector('#saveNotificationSettingsBtn')?.addEventListener('click', handleSaveNotificationSettings);
                 }
                 else if (panelType === 'team') {
                     const panel = document.getElementById('teamPanel');
                     if(!panel) return;
                     panel.querySelector('#inviteMemberForm')?.addEventListener('submit', handleInviteMember);
                     panel.querySelector('#teamList')?.addEventListener('click', handleTeamListActions); // Delegation
                 }
                 else if (panelType === 'danger') {
                     const panel = document.getElementById('dangerPanel');
                     if(!panel) return;
                     panel.querySelector('#logoutAllDevicesBtn')?.addEventListener('click', handleLogoutAllDevices);
                     panel.querySelector('#deleteAccountBtn')?.addEventListener('click', handleDeleteAccount);
                 }
             }


            // --- Placeholder Handlers for Other Features ---
            function initializeProjects() { console.log("Init Projects"); featureInitialized.projects = true; }
            function initializeReportsAnalytics() { console.log("Init Reports"); featureInitialized.reportsAnalytics = true; }
            function initializeTeamMembersView() { console.log("Init Team View"); featureInitialized.teamMembersView = true; }
            function initializeFileSharing() { console.log("Init Files"); featureInitialized.fileSharing = true; }
            function initializeDataManagement() { console.log("Init Data Mgmt"); featureInitialized.dataManagement = true; }
            function initializeProjectTracking() { console.log("Init Project Track"); featureInitialized.projectTracking = true; }
            function initializeTaskManagement() { console.log("Init Tasks"); featureInitialized.taskManagement = true; }
            function initializeTeamCalendar() { console.log("Init Calendar"); featureInitialized.teamCalendar = true; }
            function initializeDeadlineTracking() { console.log("Init Deadlines"); featureInitialized.deadlineTracking = true; }
            function initializeInnovationHub() { console.log("Init Innovation Hub"); featureInitialized.innovationHub = true; }
            function initializeProfile() { /* Already handled by updateUserUI/updateProfileFormUI */ console.log("Init Profile"); featureInitialized.profile = true; }
            function initializeDashboardSection() { /* For the main dashboard, called in init */ loadInitialDashboardData(); featureInitialized.dashboard = true; }

             // ==================================================
             // == Utility Functions ============================
             // ==================================================
             function capitalizeFirstLetter(s){return s.charAt(0).toUpperCase()+s.slice(1);}
             function toCamelCase(s){return s.toLowerCase().replace(/([-_][a-z])/g,g=>g.toUpperCase().replace('-','').replace('_',''));}
             function timeAgo(timestamp) { const now = new Date(); const date = new Date(timestamp); const seconds = Math.floor((now - date) / 1000); if(seconds < 10) return 'Just now'; if(seconds < 60) return `${seconds}s ago`; let interval = Math.floor(seconds / 60); if(interval < 60) return `${interval}m ago`; interval = Math.floor(seconds / 3600); if(interval < 24) return `${interval}h ago`; interval = Math.floor(seconds / 86400); if(interval < 7) return `${interval}d ago`; return date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' }); }
             function formatFullDateTime(timestamp) { const date = new Date(timestamp); const dateOptions = { month: 'short', day: 'numeric', year: 'numeric' }; const timeOptions = { hour: 'numeric', minute: '2-digit', hour12: true }; return `${date.toLocaleDateString(undefined, dateOptions)} at ${date.toLocaleTimeString(undefined, timeOptions)}`; }
             function showToast(message, type = 'info') { if (!showToasts && type !== 'error') return; toastMessage.textContent = message; toastMessage.className = `toast ${type} show`; setTimeout(() => { toastMessage.classList.remove('show'); }, 3000); if(playSounds && (type === 'success' || type === 'error')) playNotificationSound(); }
             function showSuccessMessage(message) { showToast(message, 'success'); }
             function showConfirmModal(title, message, onConfirm, buttonClass = 'btn-danger') { confirmTitle.textContent = title; confirmMessage.innerHTML = message; confirmCallback = onConfirm; confirmBtn.className = `btn ${buttonClass}`; confirmModal.classList.add('active'); }
             function hideConfirmModal() { confirmModal.classList.remove('active'); confirmCallback = null; }
             function playNotificationSound() { if(playSounds && notificationSound) notificationSound.play().catch(e => console.warn("Sound play failed:", e)); }
             function setupResponsiveSidebar() { /* ... (Logic from previous answer) ... */ sidebarToggle?.addEventListener('click', () => { sidebar.classList.add('active'); mainContent.classList.add('sidebar-active'); closeSidebar?.style.display = 'block'; }); closeSidebar?.addEventListener('click', closeMobileSidebar); document.addEventListener('click', (event) => { if (window.innerWidth <= 992 && sidebar.classList.contains('active')) { if (!sidebar.contains(event.target) && !sidebarToggle?.contains(event.target)) { closeMobileSidebar(); } } }); }
             function closeMobileSidebar() { sidebar.classList.remove('active'); mainContent.classList.remove('sidebar-active'); if (closeSidebar) closeSidebar.style.display = 'none'; }


            // --- Start Application ---
            initDashboard();

        }); // End DOMContentLoaded
    </script>

</body>
</html>
